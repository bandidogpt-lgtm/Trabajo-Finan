"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/simulaciones/route";
exports.ids = ["app/api/simulaciones/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_Camila_Documents_Finanzas_2025_2_Trabajo_Finan_app_api_simulaciones_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/simulaciones/route.ts */ \"(rsc)/./app/api/simulaciones/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/simulaciones/route\",\n        pathname: \"/api/simulaciones\",\n        filename: \"route\",\n        bundlePath: \"app/api/simulaciones/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Camila\\\\Documents\\\\Finanzas 2025-2\\\\Trabajo-Finan\\\\app\\\\api\\\\simulaciones\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Camila_Documents_Finanzas_2025_2_Trabajo_Finan_app_api_simulaciones_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/simulaciones/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzaW11bGFjaW9uZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNpbXVsYWNpb25lcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNpbXVsYWNpb25lcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNDYW1pbGElNUNEb2N1bWVudHMlNUNGaW5hbnphcyUyMDIwMjUtMiU1Q1RyYWJham8tRmluYW4lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0NhbWlsYSU1Q0RvY3VtZW50cyU1Q0ZpbmFuemFzJTIwMjAyNS0yJTVDVHJhYmFqby1GaW5hbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNzRDtBQUN2QztBQUM0RDtBQUMzSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGllbnRlcy1jcnVkLz8zOGY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIm5leHQvZGlzdC9zZXJ2ZXIvbm9kZS1wb2x5ZmlsbC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxDYW1pbGFcXFxcRG9jdW1lbnRzXFxcXEZpbmFuemFzIDIwMjUtMlxcXFxUcmFiYWpvLUZpbmFuXFxcXGFwcFxcXFxhcGlcXFxcc2ltdWxhY2lvbmVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zaW11bGFjaW9uZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zaW11bGFjaW9uZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NpbXVsYWNpb25lcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXENhbWlsYVxcXFxEb2N1bWVudHNcXFxcRmluYW56YXMgMjAyNS0yXFxcXFRyYWJham8tRmluYW5cXFxcYXBwXFxcXGFwaVxcXFxzaW11bGFjaW9uZXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc2ltdWxhY2lvbmVzL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/simulaciones/route.ts":
/*!***************************************!*\
  !*** ./app/api/simulaciones/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n// ============================================================\n// === 1Ô∏è‚É£ POST: Registrar una nueva simulaci√≥n (con validaciones)\n// ============================================================\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        let { tipo_moneda, tipo_tasa, tasa_interes, capitalizacion, monto_prestamo, cuota_inicial, plazo_meses, fecha_inicio, plazo_tasa_interes, periodo_gracia, plazo_periodo_gracia, monto_bono_bbp, clasificacion_bono_bbp, tem_seguro_desgravamen, tasa_seguro_inmueble, portes, costos_iniciales, usuario_id, clientes_id, inmueble_id } = body;\n        // === Defaults\n        const hoy = new Date();\n        fecha_inicio = fecha_inicio ? new Date(fecha_inicio) : hoy;\n        tipo_moneda = tipo_moneda ?? 0;\n        tipo_tasa = tipo_tasa ?? 0;\n        plazo_tasa_interes = plazo_tasa_interes ?? 7;\n        capitalizacion = capitalizacion ?? 0;\n        periodo_gracia = periodo_gracia ?? 0;\n        plazo_periodo_gracia = plazo_periodo_gracia ?? 1;\n        clasificacion_bono_bbp = clasificacion_bono_bbp ?? 0;\n        monto_bono_bbp = monto_bono_bbp ?? 0;\n        tem_seguro_desgravamen = tem_seguro_desgravamen ?? 0;\n        tasa_seguro_inmueble = tasa_seguro_inmueble ?? 0;\n        portes = portes ?? 0;\n        costos_iniciales = costos_iniciales ?? 0 // üÜï default 0\n        ;\n        const errores = [];\n        // === Validaciones seg√∫n tu tabla\n        if (tipo_moneda === 0) {\n            if (monto_prestamo < 68800 || monto_prestamo > 362100) errores.push(\"El valor del inmueble (PV) debe estar entre S/. 68,800 y S/. 362,100.\");\n        } else {\n            if (monto_prestamo < 19607.84 || monto_prestamo > 104411.76) errores.push(\"El valor del inmueble (PV) en d\\xf3lares debe estar entre $ 19,607.84 y $ 104,411.76.\");\n        }\n        if (cuota_inicial < 7.5 || cuota_inicial > 100) errores.push(\"La cuota inicial (CI) debe estar entre 7.5% y 100%.\");\n        if (plazo_meses < 60 || plazo_meses > 300) errores.push(\"El plazo en meses (n) debe estar entre 60 y 300.\");\n        if (fecha_inicio < hoy) errores.push(\"La fecha de desembolso no puede ser anterior a hoy.\");\n        if (tasa_interes <= 0) errores.push(\"La tasa de inter\\xe9s (i) debe ser mayor que 0.\");\n        if (plazo_tasa_interes < 0 || plazo_tasa_interes > 7) errores.push(\"El plazo de tasa de inter\\xe9s (p) debe estar entre 0 y 7.\");\n        if (capitalizacion < 0 || capitalizacion > 7) errores.push(\"La capitalizaci\\xf3n (c) debe estar entre 0 y 7.\");\n        if (periodo_gracia < 0 || periodo_gracia > 2) errores.push(\"El periodo de gracia (g) debe estar entre 0 y 2.\");\n        if (plazo_periodo_gracia < 1 || plazo_periodo_gracia > 24) errores.push(\"El plazo del periodo de gracia (pg) debe estar entre 1 y 24.\");\n        if (monto_bono_bbp < 0 || monto_bono_bbp > 33700) errores.push(\"El monto del bono BBP (mbbp) debe estar entre S/. 7,800 y S/. 33,700.\");\n        if (tem_seguro_desgravamen < 0) errores.push(\"El TEM del seguro desgravamen debe ser >= 0.\");\n        if (tasa_seguro_inmueble < 0) errores.push(\"La tasa del seguro inmueble debe ser >= 0.\");\n        if (portes < 0) errores.push(\"El monto de portes debe ser >= 0.\");\n        // üÜï Nueva validaci√≥n para costos iniciales\n        if (costos_iniciales < 0 || costos_iniciales > 9999.99) errores.push(\"Los costos iniciales deben ser mayores o iguales a 0 y menores a 10,000.00.\");\n        if (!usuario_id || !clientes_id || !inmueble_id) errores.push(\"Debe incluir usuario_id, clientes_id e inmueble_id v\\xe1lidos.\");\n        if (errores.length > 0) {\n            console.log(\"‚ö†Ô∏è Validaciones activas:\", errores);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: errores\n            }, {\n                status: 400\n            });\n        }\n        // === Insertar simulaci√≥n ===\n        const nuevaSimulacion = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].simulacion.create({\n            data: {\n                tipo_moneda: tipo_moneda === 0 ? \"Soles\" : \"D\\xf3lares\",\n                tipo_tasa: tipo_tasa === 0 ? \"Efectiva\" : \"Nominal\",\n                tasa_interes,\n                fecha_inicio,\n                capitalizacion: String(capitalizacion),\n                monto_prestamo,\n                cuota_inicial,\n                cuota_mensual: 0,\n                periodo_gracia: String(periodo_gracia),\n                plazo_tasa_interes,\n                plazo_meses,\n                plazo_periodo_gracia,\n                monto_bono_bbp,\n                clasificacion_bono_bbp,\n                portes,\n                tem_seguro_desgravamen,\n                tasa_seguro_inmueble,\n                costosIniciales: costos_iniciales,\n                usuario_id,\n                clientes_id,\n                inmueble_id\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"‚úÖ Simulaci\\xf3n registrada correctamente.\",\n            simulacion: nuevaSimulacion\n        });\n    } catch (error) {\n        console.error(\"‚ùå Error en POST /simulaciones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Error interno del servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n// ============================================================\n// === 2Ô∏è‚É£ GET: Calcular simulaci√≥n (M√©todo Franc√©s + Gracia Real BCP)\n// ============================================================\nasync function GET() {\n    try {\n        const simulacion = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].simulacion.findFirst({\n            orderBy: {\n                id_simulacion: \"desc\"\n            },\n            include: {\n                cliente: true\n            }\n        });\n        if (!simulacion) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"No se encontr\\xf3 ninguna simulaci\\xf3n.\"\n        }, {\n            status: 404\n        });\n        console.log(simulacion.cliente.cok);\n        console.log(typeof simulacion.cliente.cok);\n        // === Conversi√≥n de valores ===\n        const tipoTasa = simulacion.tipo_tasa === \"Efectiva\" ? 0 : 1;\n        const i = Number(simulacion.tasa_interes);\n        const p = simulacion.plazo_tasa_interes;\n        const c = Number(simulacion.capitalizacion);\n        const PV = Number(simulacion.monto_prestamo);\n        const CI = Number(simulacion.cuota_inicial) / 100;\n        const bbp = simulacion.monto_bono_bbp ? 1 : 0;\n        const mbbp = Number(simulacion.monto_bono_bbp) || 0;\n        const n = simulacion.plazo_meses;\n        const COK_TEA = simulacion.cliente.cok?.toNumber() ?? 0;\n        const COK_TEM = Math.pow(1 + COK_TEA, 1 / 12) - 1;\n        const TSD = Number(simulacion.tem_seguro_desgravamen) / 100;\n        const TSI = Number(simulacion.tasa_seguro_inmueble) / 100;\n        const Porte = Number(simulacion.portes) || 0;\n        const costosIniciales = Number(simulacion.costosIniciales) || 0;\n        console.log(COK_TEA);\n        console.log(typeof COK_TEA);\n        // === TEM del pr√©stamo ===\n        function calcularTEM(TipoTasa, i, p, c) {\n            if (TipoTasa === 0) {\n                switch(p){\n                    case 0:\n                        return (1 + i) ** 30 - 1;\n                    case 1:\n                        return (1 + i) ** 2 - 1;\n                    case 2:\n                        return i;\n                    case 3:\n                        return (1 + i) ** 0.5 - 1;\n                    case 4:\n                        return (1 + i) ** (1 / 3) - 1;\n                    case 5:\n                        return (1 + i) ** 0.25 - 1;\n                    case 6:\n                        return (1 + i) ** (1 / 6) - 1;\n                    default:\n                        return (1 + i) ** (1 / 12) - 1;\n                }\n            } else {\n                const m = c === 0 ? 360 : c === 1 ? 24 : c === 2 ? 12 : c === 3 ? 6 : c === 4 ? 4 : c === 5 ? 3 : c === 6 ? 2 : 1;\n                const TEA = (1 + i / m) ** m - 1;\n                return (1 + TEA) ** (1 / 12) - 1;\n            }\n        }\n        const r = calcularTEM(tipoTasa, i, p, c);\n        // === Capital financiado ===\n        const CI_monto = PV * CI;\n        const BBP_aplicado = bbp ? mbbp : 0;\n        const S = PV - CI_monto - BBP_aplicado + costosIniciales;\n        // === Par√°metros de gracia ===\n        const g = Number(simulacion.periodo_gracia);\n        const pg = Number(simulacion.plazo_periodo_gracia);\n        // === Variables del cronograma ===\n        let Saldo = S;\n        let CuotaBase = 0;\n        let debeRecalcularCuota = false;\n        const Flujos = [];\n        const cuotas = [];\n        // === Bucle del cronograma mensual ===\n        for(let k = 1; k <= n; k++){\n            let Interes = Saldo * r;\n            let SegDes = -Saldo * TSD;\n            let SegInm = -(PV * TSI) / 12;\n            let PorteVal = -Porte;\n            let Amort = 0;\n            let Cuota = 0;\n            // === 1. PERIODO DE GRACIA ===\n            if (k <= pg && g > 0) {\n                if (g === 2) {\n                    // === Gracia Total ===\n                    Cuota = 0;\n                    Amort = 0;\n                    Saldo = Saldo + Interes + -SegDes + -SegInm + -PorteVal;\n                }\n                if (g === 1) {\n                    // === Gracia Parcial ===\n                    Cuota = Interes + -SegDes + -SegInm + -PorteVal;\n                    Amort = 0;\n                    Saldo = Saldo;\n                }\n                if (k === pg) debeRecalcularCuota = true;\n                cuotas.push(Number(Cuota.toFixed(2)));\n                Flujos.push([\n                    k,\n                    Number(CuotaBase.toFixed(2)),\n                    Number(Cuota.toFixed(2)),\n                    Number(Interes.toFixed(2)),\n                    Amort,\n                    Number(SegDes.toFixed(2)),\n                    Number(SegInm.toFixed(2)),\n                    Number(PorteVal.toFixed(2)),\n                    Number(Saldo.toFixed(2)),\n                    Number((-Cuota).toFixed(2))\n                ]);\n                continue;\n            }\n            // === 2. RE-C√ÅLCULO DE CUOTA BASE AL TERMINAR GRACIA ===\n            if (debeRecalcularCuota) {\n                const tasa = r + TSD;\n                CuotaBase = Saldo * tasa / (1 - (1 + tasa) ** -(n - pg));\n                debeRecalcularCuota = false;\n            }\n            // Si no hubo gracia, usar m√©todo franc√©s normal\n            if (CuotaBase === 0) {\n                const tasa = r + TSD;\n                CuotaBase = Saldo * tasa / (1 - (1 + tasa) ** -n);\n            }\n            // === 3. CUOTA NORMAL ===\n            Amort = CuotaBase - Interes - -SegDes;\n            Cuota = Interes + Amort - SegDes - SegInm - PorteVal;\n            Saldo = Saldo - Amort;\n            cuotas.push(Number(Cuota.toFixed(2)));\n            Flujos.push([\n                k,\n                Number(CuotaBase.toFixed(2)),\n                Number(Cuota.toFixed(2)),\n                Number(Interes.toFixed(2)),\n                Number(Amort.toFixed(2)),\n                Number(SegDes.toFixed(2)),\n                Number(SegInm.toFixed(2)),\n                Number(PorteVal.toFixed(2)),\n                Number(Saldo.toFixed(2)),\n                Number((-Cuota).toFixed(2))\n            ]);\n        }\n        // === 5. Calcular VAN y TIR\n        let sumaCuotas = 0;\n        for(let i = 0; i < n; i++){\n            sumaCuotas += -cuotas[i] / Math.pow(1 + COK_TEM, i + 1);\n        }\n        const VAN = S + sumaCuotas;\n        // === TIR EXACTA (tu m√©todo original)\n        const flujosTIR = [\n            -S,\n            ...cuotas\n        ];\n        let tasaAprox = 0.01, incremento = 0.000001, valorVAN = 1, iter = 0, limite = 100000;\n        while(Math.abs(valorVAN) > 0.0001 && iter < limite){\n            valorVAN = 0;\n            for(let i = 0; i < flujosTIR.length; i++){\n                valorVAN += flujosTIR[i] / Math.pow(1 + tasaAprox, i);\n            }\n            tasaAprox += valorVAN > 0 ? incremento : -incremento;\n            iter++;\n        }\n        // === TCEA (tu f√≥rmula original)\n        const TCEA = Math.pow(1 + tasaAprox, 12) - 1;\n        let descripcionGracia = \"\";\n        if (g === 0) {\n            descripcionGracia = \"Sin periodo de gracia\";\n        } else if (g === 1) {\n            descripcionGracia = `Gracia parcial por ${pg} meses (solo paga intereses)`;\n        } else if (g === 2) {\n            descripcionGracia = `Gracia total por ${pg} meses (no paga nada)`;\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            resumen: {\n                tipo_tasa: simulacion.tipo_tasa,\n                capitalizacion: simulacion.capitalizacion,\n                tasa_ingresada: simulacion.tasa_interes,\n                TEM: Number(r.toFixed(6)),\n                saldo_financiar: PV - CI_monto,\n                costos_iniciales: costosIniciales,\n                monto_prestamo_total: S,\n                cuota_base: Number(CuotaBase.toFixed(2)),\n                plazo_meses: n,\n                // üü¶ NUEVO: detalles de gracia\n                periodo_gracia_tipo: g,\n                periodo_gracia_meses: pg,\n                periodo_gracia_descripcion: descripcionGracia,\n                VAN: Number(VAN.toFixed(2)),\n                TIR: Number((tasaAprox * 100).toFixed(2)) + \"%\",\n                TCEA: Number((TCEA * 100).toFixed(2)) + \"%\"\n            },\n            headers: [\n                \"Iter\",\n                \"CuotaBase\",\n                \"Cuota\",\n                \"Interes\",\n                \"Amort\",\n                \"SegDes\",\n                \"SegInm\",\n                \"Porte\",\n                \"Saldo\",\n                \"Flujo\"\n            ],\n            data: Flujos\n        });\n    } catch (error) {\n        console.error(\"‚ùå Error en GET /simulaciones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Error interno del servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JwRSxXQUFXNUIsWUFBWTtnQkFDdkNpRyxLQUFLckQsT0FBT29CLEVBQUVrQixPQUFPLENBQUM7Z0JBQ3RCZ0IsaUJBQWlCbkQsS0FBR2tCO2dCQUNwQm5ELGtCQUFrQm1CO2dCQUNsQmtFLHNCQUFzQmhDO2dCQUN0QmlDLFlBQVl4RCxPQUFPMkIsVUFBVVcsT0FBTyxDQUFDO2dCQUNyQzlFLGFBQWErQztnQkFDYiwrQkFBK0I7Z0JBQy9Ca0QscUJBQXFCakM7Z0JBQ3JCa0Msc0JBQXNCakM7Z0JBQ3RCa0MsNEJBQTRCVDtnQkFHNUJULEtBQUt6QyxPQUFPeUMsSUFBSUgsT0FBTyxDQUFDO2dCQUN4QnNCLEtBQUs1RCxPQUFPLENBQUMyQyxZQUFZLEdBQUUsRUFBR0wsT0FBTyxDQUFDLE1BQU07Z0JBQzVDVyxNQUFNakQsT0FBTyxDQUFDaUQsT0FBTyxHQUFFLEVBQUdYLE9BQU8sQ0FBQyxNQUFNO1lBQzFDO1lBQ0F1QixTQUFTO2dCQUFDO2dCQUFPO2dCQUFZO2dCQUFRO2dCQUFVO2dCQUFRO2dCQUFTO2dCQUFTO2dCQUFRO2dCQUFRO2FBQVE7WUFDakczRSxNQUFNMkM7UUFDUjtJQUVGLEVBQUUsT0FBT2hELE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBT2pDLGtGQUFZQSxDQUFDSyxJQUFJLENBQUM7WUFBRTRCLE9BQU87UUFBNkIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudGVzLWNydWQvLi9hcHAvYXBpL3NpbXVsYWNpb25lcy9yb3V0ZS50cz8zNDJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgZGIgZnJvbSAnQC9saWIvZGInXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gPT09IDHvuI/ig6MgUE9TVDogUmVnaXN0cmFyIHVuYSBudWV2YSBzaW11bGFjacOzbiAoY29uIHZhbGlkYWNpb25lcylcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxyXG4gICAgbGV0IHtcclxuICAgICAgdGlwb19tb25lZGEsXHJcbiAgICAgIHRpcG9fdGFzYSxcclxuICAgICAgdGFzYV9pbnRlcmVzLFxyXG4gICAgICBjYXBpdGFsaXphY2lvbixcclxuICAgICAgbW9udG9fcHJlc3RhbW8sXHJcbiAgICAgIGN1b3RhX2luaWNpYWwsXHJcbiAgICAgIHBsYXpvX21lc2VzLFxyXG4gICAgICBmZWNoYV9pbmljaW8sXHJcbiAgICAgIHBsYXpvX3Rhc2FfaW50ZXJlcyxcclxuICAgICAgcGVyaW9kb19ncmFjaWEsXHJcbiAgICAgIHBsYXpvX3BlcmlvZG9fZ3JhY2lhLFxyXG4gICAgICBtb250b19ib25vX2JicCxcclxuICAgICAgY2xhc2lmaWNhY2lvbl9ib25vX2JicCxcclxuICAgICAgdGVtX3NlZ3Vyb19kZXNncmF2YW1lbixcclxuICAgICAgdGFzYV9zZWd1cm9faW5tdWVibGUsXHJcbiAgICAgIHBvcnRlcyxcclxuICAgICAgY29zdG9zX2luaWNpYWxlcywgLy8g8J+GlSBudWV2byBjYW1wbyBkZWwgYm9keVxyXG4gICAgICB1c3VhcmlvX2lkLFxyXG4gICAgICBjbGllbnRlc19pZCxcclxuICAgICAgaW5tdWVibGVfaWRcclxuICAgIH0gPSBib2R5XHJcblxyXG4gICAgLy8gPT09IERlZmF1bHRzXHJcbiAgICBjb25zdCBob3kgPSBuZXcgRGF0ZSgpXHJcbiAgICBmZWNoYV9pbmljaW8gPSBmZWNoYV9pbmljaW8gPyBuZXcgRGF0ZShmZWNoYV9pbmljaW8pIDogaG95XHJcbiAgICB0aXBvX21vbmVkYSA9IHRpcG9fbW9uZWRhID8/IDBcclxuICAgIHRpcG9fdGFzYSA9IHRpcG9fdGFzYSA/PyAwXHJcbiAgICBwbGF6b190YXNhX2ludGVyZXMgPSBwbGF6b190YXNhX2ludGVyZXMgPz8gN1xyXG4gICAgY2FwaXRhbGl6YWNpb24gPSBjYXBpdGFsaXphY2lvbiA/PyAwXHJcbiAgICBwZXJpb2RvX2dyYWNpYSA9IHBlcmlvZG9fZ3JhY2lhID8/IDBcclxuICAgIHBsYXpvX3BlcmlvZG9fZ3JhY2lhID0gcGxhem9fcGVyaW9kb19ncmFjaWEgPz8gMVxyXG4gICAgY2xhc2lmaWNhY2lvbl9ib25vX2JicCA9IGNsYXNpZmljYWNpb25fYm9ub19iYnAgPz8gMFxyXG4gICAgbW9udG9fYm9ub19iYnAgPSBtb250b19ib25vX2JicCA/PyAwXHJcbiAgICB0ZW1fc2VndXJvX2Rlc2dyYXZhbWVuID0gdGVtX3NlZ3Vyb19kZXNncmF2YW1lbiA/PyAwXHJcbiAgICB0YXNhX3NlZ3Vyb19pbm11ZWJsZSA9IHRhc2Ffc2VndXJvX2lubXVlYmxlID8/IDBcclxuICAgIHBvcnRlcyA9IHBvcnRlcyA/PyAwXHJcbiAgICBjb3N0b3NfaW5pY2lhbGVzID0gY29zdG9zX2luaWNpYWxlcyA/PyAwIC8vIPCfhpUgZGVmYXVsdCAwXHJcblxyXG4gICAgY29uc3QgZXJyb3Jlczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIC8vID09PSBWYWxpZGFjaW9uZXMgc2Vnw7puIHR1IHRhYmxhXHJcbiAgICBpZiAodGlwb19tb25lZGEgPT09IDApIHtcclxuICAgICAgaWYgKG1vbnRvX3ByZXN0YW1vIDwgNjg4MDAgfHwgbW9udG9fcHJlc3RhbW8gPiAzNjIxMDApXHJcbiAgICAgICAgZXJyb3Jlcy5wdXNoKCdFbCB2YWxvciBkZWwgaW5tdWVibGUgKFBWKSBkZWJlIGVzdGFyIGVudHJlIFMvLiA2OCw4MDAgeSBTLy4gMzYyLDEwMC4nKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKG1vbnRvX3ByZXN0YW1vIDwgMTk2MDcuODQgfHwgbW9udG9fcHJlc3RhbW8gPiAxMDQ0MTEuNzYpXHJcbiAgICAgICAgZXJyb3Jlcy5wdXNoKCdFbCB2YWxvciBkZWwgaW5tdWVibGUgKFBWKSBlbiBkw7NsYXJlcyBkZWJlIGVzdGFyIGVudHJlICQgMTksNjA3Ljg0IHkgJCAxMDQsNDExLjc2LicpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1b3RhX2luaWNpYWwgPCA3LjUgfHwgY3VvdGFfaW5pY2lhbCA+IDEwMClcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdMYSBjdW90YSBpbmljaWFsIChDSSkgZGViZSBlc3RhciBlbnRyZSA3LjUlIHkgMTAwJS4nKVxyXG4gICAgaWYgKHBsYXpvX21lc2VzIDwgNjAgfHwgcGxhem9fbWVzZXMgPiAzMDApXHJcbiAgICAgIGVycm9yZXMucHVzaCgnRWwgcGxhem8gZW4gbWVzZXMgKG4pIGRlYmUgZXN0YXIgZW50cmUgNjAgeSAzMDAuJylcclxuICAgIGlmIChmZWNoYV9pbmljaW8gPCBob3kpXHJcbiAgICAgIGVycm9yZXMucHVzaCgnTGEgZmVjaGEgZGUgZGVzZW1ib2xzbyBubyBwdWVkZSBzZXIgYW50ZXJpb3IgYSBob3kuJylcclxuICAgIGlmICh0YXNhX2ludGVyZXMgPD0gMClcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdMYSB0YXNhIGRlIGludGVyw6lzIChpKSBkZWJlIHNlciBtYXlvciBxdWUgMC4nKVxyXG4gICAgaWYgKHBsYXpvX3Rhc2FfaW50ZXJlcyA8IDAgfHwgcGxhem9fdGFzYV9pbnRlcmVzID4gNylcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdFbCBwbGF6byBkZSB0YXNhIGRlIGludGVyw6lzIChwKSBkZWJlIGVzdGFyIGVudHJlIDAgeSA3LicpXHJcbiAgICBpZiAoY2FwaXRhbGl6YWNpb24gPCAwIHx8IGNhcGl0YWxpemFjaW9uID4gNylcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdMYSBjYXBpdGFsaXphY2nDs24gKGMpIGRlYmUgZXN0YXIgZW50cmUgMCB5IDcuJylcclxuICAgIGlmIChwZXJpb2RvX2dyYWNpYSA8IDAgfHwgcGVyaW9kb19ncmFjaWEgPiAyKVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0VsIHBlcmlvZG8gZGUgZ3JhY2lhIChnKSBkZWJlIGVzdGFyIGVudHJlIDAgeSAyLicpXHJcbiAgICBpZiAocGxhem9fcGVyaW9kb19ncmFjaWEgPCAxIHx8IHBsYXpvX3BlcmlvZG9fZ3JhY2lhID4gMjQpXHJcbiAgICAgIGVycm9yZXMucHVzaCgnRWwgcGxhem8gZGVsIHBlcmlvZG8gZGUgZ3JhY2lhIChwZykgZGViZSBlc3RhciBlbnRyZSAxIHkgMjQuJylcclxuICAgIGlmIChtb250b19ib25vX2JicCA8IDAgfHwgbW9udG9fYm9ub19iYnAgPiAzMzcwMClcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdFbCBtb250byBkZWwgYm9ubyBCQlAgKG1iYnApIGRlYmUgZXN0YXIgZW50cmUgUy8uIDcsODAwIHkgUy8uIDMzLDcwMC4nKVxyXG4gICAgaWYgKHRlbV9zZWd1cm9fZGVzZ3JhdmFtZW4gPCAwKVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0VsIFRFTSBkZWwgc2VndXJvIGRlc2dyYXZhbWVuIGRlYmUgc2VyID49IDAuJylcclxuICAgIGlmICh0YXNhX3NlZ3Vyb19pbm11ZWJsZSA8IDApXHJcbiAgICAgIGVycm9yZXMucHVzaCgnTGEgdGFzYSBkZWwgc2VndXJvIGlubXVlYmxlIGRlYmUgc2VyID49IDAuJylcclxuICAgIGlmIChwb3J0ZXMgPCAwKVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0VsIG1vbnRvIGRlIHBvcnRlcyBkZWJlIHNlciA+PSAwLicpXHJcblxyXG4gICAgLy8g8J+GlSBOdWV2YSB2YWxpZGFjacOzbiBwYXJhIGNvc3RvcyBpbmljaWFsZXNcclxuICAgIGlmIChjb3N0b3NfaW5pY2lhbGVzIDwgMCB8fCBjb3N0b3NfaW5pY2lhbGVzID4gOTk5OS45OSlcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdMb3MgY29zdG9zIGluaWNpYWxlcyBkZWJlbiBzZXIgbWF5b3JlcyBvIGlndWFsZXMgYSAwIHkgbWVub3JlcyBhIDEwLDAwMC4wMC4nKVxyXG5cclxuICAgIGlmICghdXN1YXJpb19pZCB8fCAhY2xpZW50ZXNfaWQgfHwgIWlubXVlYmxlX2lkKVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0RlYmUgaW5jbHVpciB1c3VhcmlvX2lkLCBjbGllbnRlc19pZCBlIGlubXVlYmxlX2lkIHbDoWxpZG9zLicpXHJcblxyXG4gICAgaWYgKGVycm9yZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIuKaoO+4jyBWYWxpZGFjaW9uZXMgYWN0aXZhczpcIiwgZXJyb3JlcylcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yZXMgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vID09PSBJbnNlcnRhciBzaW11bGFjacOzbiA9PT1cclxuICAgIGNvbnN0IG51ZXZhU2ltdWxhY2lvbiA9IGF3YWl0IGRiLnNpbXVsYWNpb24uY3JlYXRlKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHRpcG9fbW9uZWRhOiB0aXBvX21vbmVkYSA9PT0gMCA/ICdTb2xlcycgOiAnRMOzbGFyZXMnLFxyXG4gICAgICAgIHRpcG9fdGFzYTogdGlwb190YXNhID09PSAwID8gJ0VmZWN0aXZhJyA6ICdOb21pbmFsJyxcclxuICAgICAgICB0YXNhX2ludGVyZXMsXHJcbiAgICAgICAgZmVjaGFfaW5pY2lvLFxyXG4gICAgICAgIGNhcGl0YWxpemFjaW9uOiBTdHJpbmcoY2FwaXRhbGl6YWNpb24pLFxyXG4gICAgICAgIG1vbnRvX3ByZXN0YW1vLFxyXG4gICAgICAgIGN1b3RhX2luaWNpYWwsXHJcbiAgICAgICAgY3VvdGFfbWVuc3VhbDogMCxcclxuICAgICAgICBwZXJpb2RvX2dyYWNpYTogU3RyaW5nKHBlcmlvZG9fZ3JhY2lhKSxcclxuICAgICAgICBwbGF6b190YXNhX2ludGVyZXMsXHJcbiAgICAgICAgcGxhem9fbWVzZXMsXHJcbiAgICAgICAgcGxhem9fcGVyaW9kb19ncmFjaWEsXHJcbiAgICAgICAgbW9udG9fYm9ub19iYnAsXHJcbiAgICAgICAgY2xhc2lmaWNhY2lvbl9ib25vX2JicCxcclxuICAgICAgICBwb3J0ZXMsXHJcbiAgICAgICAgdGVtX3NlZ3Vyb19kZXNncmF2YW1lbixcclxuICAgICAgICB0YXNhX3NlZ3Vyb19pbm11ZWJsZSxcclxuICAgICAgICBjb3N0b3NJbmljaWFsZXM6IGNvc3Rvc19pbmljaWFsZXMsIC8vIPCfhpUgaW5zZXJ0IGNvcnJlY3RvIChjYW1lbENhc2UpXHJcbiAgICAgICAgdXN1YXJpb19pZCxcclxuICAgICAgICBjbGllbnRlc19pZCxcclxuICAgICAgICBpbm11ZWJsZV9pZFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICfinIUgU2ltdWxhY2nDs24gcmVnaXN0cmFkYSBjb3JyZWN0YW1lbnRlLicsXHJcbiAgICAgIHNpbXVsYWNpb246IG51ZXZhU2ltdWxhY2lvblxyXG4gICAgfSlcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZW4gUE9TVCAvc2ltdWxhY2lvbmVzOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufVxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyA9PT0gMu+4j+KDoyBHRVQ6IENhbGN1bGFyIHNpbXVsYWNpw7NuIChNw6l0b2RvIEZyYW5jw6lzICsgR3JhY2lhIFJlYWwgQkNQKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2ltdWxhY2lvbiA9IGF3YWl0IGRiLnNpbXVsYWNpb24uZmluZEZpcnN0KHtcclxuICAgICAgb3JkZXJCeTogeyBpZF9zaW11bGFjaW9uOiAnZGVzYycgfSxcclxuICAgICAgaW5jbHVkZTogeyBjbGllbnRlOiB0cnVlIH1cclxuICAgIH0pXHJcblxyXG5cclxuICAgIGlmICghc2ltdWxhY2lvbilcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyBzZSBlbmNvbnRyw7MgbmluZ3VuYSBzaW11bGFjacOzbi4nIH0sIHsgc3RhdHVzOiA0MDQgfSlcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coc2ltdWxhY2lvbi5jbGllbnRlLmNvaylcclxuICAgIGNvbnNvbGUubG9nKHR5cGVvZiBzaW11bGFjaW9uLmNsaWVudGUuY29rKVxyXG5cclxuICAgIC8vID09PSBDb252ZXJzacOzbiBkZSB2YWxvcmVzID09PVxyXG4gICAgY29uc3QgdGlwb1Rhc2EgPSBzaW11bGFjaW9uLnRpcG9fdGFzYSA9PT0gJ0VmZWN0aXZhJyA/IDAgOiAxXHJcbiAgICBjb25zdCBpID0gTnVtYmVyKHNpbXVsYWNpb24udGFzYV9pbnRlcmVzKVxyXG4gICAgY29uc3QgcCA9IHNpbXVsYWNpb24ucGxhem9fdGFzYV9pbnRlcmVzXHJcbiAgICBjb25zdCBjID0gTnVtYmVyKHNpbXVsYWNpb24uY2FwaXRhbGl6YWNpb24pXHJcbiAgICBjb25zdCBQViA9IE51bWJlcihzaW11bGFjaW9uLm1vbnRvX3ByZXN0YW1vKVxyXG4gICAgY29uc3QgQ0kgPSBOdW1iZXIoc2ltdWxhY2lvbi5jdW90YV9pbmljaWFsKSAvIDEwMFxyXG4gICAgY29uc3QgYmJwID0gc2ltdWxhY2lvbi5tb250b19ib25vX2JicCA/IDEgOiAwXHJcbiAgICBjb25zdCBtYmJwID0gTnVtYmVyKHNpbXVsYWNpb24ubW9udG9fYm9ub19iYnApIHx8IDBcclxuICAgIGNvbnN0IG4gPSBzaW11bGFjaW9uLnBsYXpvX21lc2VzXHJcblxyXG4gICAgY29uc3QgQ09LX1RFQSA9IHNpbXVsYWNpb24uY2xpZW50ZS5jb2s/LnRvTnVtYmVyKCkgPz8gMFxyXG4gICAgY29uc3QgQ09LX1RFTSA9IE1hdGgucG93KDEgKyBDT0tfVEVBLCAxLzEyKSAtIDFcclxuXHJcbiAgICBjb25zdCBUU0QgPSBOdW1iZXIoc2ltdWxhY2lvbi50ZW1fc2VndXJvX2Rlc2dyYXZhbWVuKSAvIDEwMFxyXG4gICAgY29uc3QgVFNJID0gTnVtYmVyKHNpbXVsYWNpb24udGFzYV9zZWd1cm9faW5tdWVibGUpIC8gMTAwXHJcbiAgICBjb25zdCBQb3J0ZSA9IE51bWJlcihzaW11bGFjaW9uLnBvcnRlcykgfHwgMFxyXG4gICAgY29uc3QgY29zdG9zSW5pY2lhbGVzID0gTnVtYmVyKHNpbXVsYWNpb24uY29zdG9zSW5pY2lhbGVzKSB8fCAwXHJcbmNvbnNvbGUubG9nKENPS19URUEpXHJcbmNvbnNvbGUubG9nKHR5cGVvZiBDT0tfVEVBKVxyXG4gICAgLy8gPT09IFRFTSBkZWwgcHLDqXN0YW1vID09PVxyXG5mdW5jdGlvbiBjYWxjdWxhclRFTShcclxuICBUaXBvVGFzYTogbnVtYmVyLFxyXG4gIGk6IG51bWJlcixcclxuICBwOiBudW1iZXIsXHJcbiAgYzogbnVtYmVyXHJcbik6IG51bWJlciB7XHJcbiAgaWYgKFRpcG9UYXNhID09PSAwKSB7XHJcbiAgICBzd2l0Y2ggKHApIHtcclxuICAgICAgY2FzZSAwOiByZXR1cm4gKDEgKyBpKSAqKiAzMCAtIDFcclxuICAgICAgY2FzZSAxOiByZXR1cm4gKDEgKyBpKSAqKiAyIC0gMVxyXG4gICAgICBjYXNlIDI6IHJldHVybiBpXHJcbiAgICAgIGNhc2UgMzogcmV0dXJuICgxICsgaSkgKiogMC41IC0gMVxyXG4gICAgICBjYXNlIDQ6IHJldHVybiAoMSArIGkpICoqICgxIC8gMykgLSAxXHJcbiAgICAgIGNhc2UgNTogcmV0dXJuICgxICsgaSkgKiogMC4yNSAtIDFcclxuICAgICAgY2FzZSA2OiByZXR1cm4gKDEgKyBpKSAqKiAoMSAvIDYpIC0gMVxyXG4gICAgICBkZWZhdWx0OiByZXR1cm4gKDEgKyBpKSAqKiAoMSAvIDEyKSAtIDFcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgbSA9XHJcbiAgICAgIGMgPT09IDAgPyAzNjAgOlxyXG4gICAgICBjID09PSAxID8gMjQgOlxyXG4gICAgICBjID09PSAyID8gMTIgOlxyXG4gICAgICBjID09PSAzID8gNiA6XHJcbiAgICAgIGMgPT09IDQgPyA0IDpcclxuICAgICAgYyA9PT0gNSA/IDMgOlxyXG4gICAgICBjID09PSA2ID8gMiA6IDFcclxuXHJcbiAgICBjb25zdCBURUEgPSAoMSArIGkgLyBtKSAqKiBtIC0gMVxyXG4gICAgcmV0dXJuICgxICsgVEVBKSAqKiAoMSAvIDEyKSAtIDFcclxuICB9XHJcbn1cclxuXHJcblxyXG4gICAgY29uc3QgciA9IGNhbGN1bGFyVEVNKHRpcG9UYXNhLCBpLCBwLCBjKVxyXG5cclxuICAgIC8vID09PSBDYXBpdGFsIGZpbmFuY2lhZG8gPT09XHJcbiAgICBjb25zdCBDSV9tb250byA9IFBWICogQ0lcclxuICAgIGNvbnN0IEJCUF9hcGxpY2FkbyA9IGJicCA/IG1iYnAgOiAwXHJcbiAgICBjb25zdCBTID0gUFYgLSBDSV9tb250byAtIEJCUF9hcGxpY2FkbyArIGNvc3Rvc0luaWNpYWxlc1xyXG5cclxuICAgIC8vID09PSBQYXLDoW1ldHJvcyBkZSBncmFjaWEgPT09XHJcbiAgICBjb25zdCBnID0gTnVtYmVyKHNpbXVsYWNpb24ucGVyaW9kb19ncmFjaWEpXHJcbiAgICBjb25zdCBwZyA9IE51bWJlcihzaW11bGFjaW9uLnBsYXpvX3BlcmlvZG9fZ3JhY2lhKVxyXG5cclxuICAgIC8vID09PSBWYXJpYWJsZXMgZGVsIGNyb25vZ3JhbWEgPT09XHJcbiAgICBsZXQgU2FsZG8gPSBTXHJcbiAgICBsZXQgQ3VvdGFCYXNlID0gMFxyXG4gICAgbGV0IGRlYmVSZWNhbGN1bGFyQ3VvdGEgPSBmYWxzZVxyXG5cclxuICAgIGNvbnN0IEZsdWpvcyA9IFtdXHJcbiAgICBjb25zdCBjdW90YXMgPSBbXVxyXG5cclxuICAgIC8vID09PSBCdWNsZSBkZWwgY3Jvbm9ncmFtYSBtZW5zdWFsID09PVxyXG4gICAgZm9yIChsZXQgayA9IDE7IGsgPD0gbjsgaysrKSB7XHJcbiAgICAgIGxldCBJbnRlcmVzID0gU2FsZG8gKiByXHJcbiAgICAgIGxldCBTZWdEZXMgPSAtU2FsZG8gKiBUU0RcclxuICAgICAgbGV0IFNlZ0lubSA9IC0oUFYgKiBUU0kpIC8gMTJcclxuICAgICAgbGV0IFBvcnRlVmFsID0gLVBvcnRlXHJcblxyXG4gICAgICBsZXQgQW1vcnQgPSAwXHJcbiAgICAgIGxldCBDdW90YSA9IDBcclxuXHJcbiAgICAgIC8vID09PSAxLiBQRVJJT0RPIERFIEdSQUNJQSA9PT1cclxuICAgICAgaWYgKGsgPD0gcGcgJiYgZyA+IDApIHtcclxuXHJcbiAgICAgICAgaWYgKGcgPT09IDIpIHtcclxuICAgICAgICAgIC8vID09PSBHcmFjaWEgVG90YWwgPT09XHJcbiAgICAgICAgICBDdW90YSA9IDBcclxuICAgICAgICAgIEFtb3J0ID0gMFxyXG4gICAgICAgICAgU2FsZG8gPSBTYWxkbyArIEludGVyZXMgKyAoLVNlZ0RlcykgKyAoLVNlZ0lubSkrKC1Qb3J0ZVZhbClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChnID09PSAxKSB7XHJcbiAgICAgICAgICAvLyA9PT0gR3JhY2lhIFBhcmNpYWwgPT09XHJcbiAgICAgICAgICBDdW90YSA9IEludGVyZXMgKyAoLVNlZ0RlcykgKyAoLVNlZ0lubSkgKygtUG9ydGVWYWwpXHJcbiAgICAgICAgICBBbW9ydCA9IDBcclxuICAgICAgICAgIFNhbGRvID0gU2FsZG9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChrID09PSBwZykgZGViZVJlY2FsY3VsYXJDdW90YSA9IHRydWVcclxuXHJcbiAgICAgICAgY3VvdGFzLnB1c2goTnVtYmVyKEN1b3RhLnRvRml4ZWQoMikpKVxyXG4gICAgICAgIEZsdWpvcy5wdXNoKFtcclxuICAgICAgICAgIGssIE51bWJlcihDdW90YUJhc2UudG9GaXhlZCgyKSksXHJcbiAgICAgICAgICBOdW1iZXIoQ3VvdGEudG9GaXhlZCgyKSksXHJcbiAgICAgICAgICBOdW1iZXIoSW50ZXJlcy50b0ZpeGVkKDIpKSxcclxuICAgICAgICAgIEFtb3J0LFxyXG4gICAgICAgICAgTnVtYmVyKFNlZ0Rlcy50b0ZpeGVkKDIpKSxcclxuICAgICAgICAgIE51bWJlcihTZWdJbm0udG9GaXhlZCgyKSksXHJcbiAgICAgICAgICBOdW1iZXIoUG9ydGVWYWwudG9GaXhlZCgyKSksXHJcbiAgICAgICAgICBOdW1iZXIoU2FsZG8udG9GaXhlZCgyKSksXHJcbiAgICAgICAgICBOdW1iZXIoKC1DdW90YSkudG9GaXhlZCgyKSlcclxuICAgICAgICBdKVxyXG5cclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyA9PT0gMi4gUkUtQ8OBTENVTE8gREUgQ1VPVEEgQkFTRSBBTCBURVJNSU5BUiBHUkFDSUEgPT09XHJcbiAgICAgIGlmIChkZWJlUmVjYWxjdWxhckN1b3RhKSB7XHJcbiAgICAgICAgY29uc3QgdGFzYSA9IHIgKyBUU0RcclxuICAgICAgICBDdW90YUJhc2UgPSAoU2FsZG8gKiB0YXNhKSAvICgxIC0gKDEgKyB0YXNhKSAqKiAtKG4gLSBwZykpXHJcbiAgICAgICAgZGViZVJlY2FsY3VsYXJDdW90YSA9IGZhbHNlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNpIG5vIGh1Ym8gZ3JhY2lhLCB1c2FyIG3DqXRvZG8gZnJhbmPDqXMgbm9ybWFsXHJcbiAgICAgIGlmIChDdW90YUJhc2UgPT09IDApIHtcclxuICAgICAgICBjb25zdCB0YXNhID0gciArIFRTRFxyXG4gICAgICAgIEN1b3RhQmFzZSA9IChTYWxkbyAqIHRhc2EpIC8gKDEgLSAoMSArIHRhc2EpICoqIC1uKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyA9PT0gMy4gQ1VPVEEgTk9STUFMID09PVxyXG4gICAgICBBbW9ydCA9IEN1b3RhQmFzZSAtIEludGVyZXMgLSAoLVNlZ0RlcylcclxuICAgICAgQ3VvdGEgPSBJbnRlcmVzICsgQW1vcnQgLSBTZWdEZXMgLSBTZWdJbm0gLSBQb3J0ZVZhbFxyXG4gICAgICBTYWxkbyA9IFNhbGRvIC0gQW1vcnRcclxuXHJcbiAgICAgIGN1b3Rhcy5wdXNoKE51bWJlcihDdW90YS50b0ZpeGVkKDIpKSlcclxuICAgICAgRmx1am9zLnB1c2goW1xyXG4gICAgICAgIGssXHJcbiAgICAgICAgTnVtYmVyKEN1b3RhQmFzZS50b0ZpeGVkKDIpKSxcclxuICAgICAgICBOdW1iZXIoQ3VvdGEudG9GaXhlZCgyKSksXHJcbiAgICAgICAgTnVtYmVyKEludGVyZXMudG9GaXhlZCgyKSksXHJcbiAgICAgICAgTnVtYmVyKEFtb3J0LnRvRml4ZWQoMikpLFxyXG4gICAgICAgIE51bWJlcihTZWdEZXMudG9GaXhlZCgyKSksXHJcbiAgICAgICAgTnVtYmVyKFNlZ0lubS50b0ZpeGVkKDIpKSxcclxuICAgICAgICBOdW1iZXIoUG9ydGVWYWwudG9GaXhlZCgyKSksXHJcbiAgICAgICAgTnVtYmVyKFNhbGRvLnRvRml4ZWQoMikpLFxyXG4gICAgICAgIE51bWJlcigoLUN1b3RhKS50b0ZpeGVkKDIpKVxyXG4gICAgICBdKVxyXG4gICAgfVxyXG5cclxuICAgICAgLy8gPT09IDUuIENhbGN1bGFyIFZBTiB5IFRJUlxyXG4gICAgICBsZXQgc3VtYUN1b3RhcyA9IDBcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBzdW1hQ3VvdGFzICs9IC1jdW90YXNbaV0gLyBNYXRoLnBvdygxICsgQ09LX1RFTSwgaSArIDEpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IFZBTiA9IFMgKyBzdW1hQ3VvdGFzXHJcblxyXG4gICAgICAvLyA9PT0gVElSIEVYQUNUQSAodHUgbcOpdG9kbyBvcmlnaW5hbClcclxuICAgICAgY29uc3QgZmx1am9zVElSID0gWy1TLCAuLi5jdW90YXNdXHJcbiAgICAgIGxldCB0YXNhQXByb3ggPSAwLjAxLCBpbmNyZW1lbnRvID0gMC4wMDAwMDEsIHZhbG9yVkFOID0gMSwgaXRlciA9IDAsIGxpbWl0ZSA9IDEwMDAwMFxyXG5cclxuICAgICAgd2hpbGUgKE1hdGguYWJzKHZhbG9yVkFOKSA+IDAuMDAwMSAmJiBpdGVyIDwgbGltaXRlKSB7XHJcbiAgICAgICAgdmFsb3JWQU4gPSAwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbHVqb3NUSVIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhbG9yVkFOICs9IGZsdWpvc1RJUltpXSAvIE1hdGgucG93KDEgKyB0YXNhQXByb3gsIGkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2FBcHJveCArPSB2YWxvclZBTiA+IDAgPyBpbmNyZW1lbnRvIDogLWluY3JlbWVudG9cclxuICAgICAgICBpdGVyKytcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gPT09IFRDRUEgKHR1IGbDs3JtdWxhIG9yaWdpbmFsKVxyXG4gICAgICBjb25zdCBUQ0VBID0gTWF0aC5wb3coMSArIHRhc2FBcHJveCwgMTIpIC0gMVxyXG5sZXQgZGVzY3JpcGNpb25HcmFjaWEgPSBcIlwiXHJcblxyXG5pZiAoZyA9PT0gMCkge1xyXG4gIGRlc2NyaXBjaW9uR3JhY2lhID0gXCJTaW4gcGVyaW9kbyBkZSBncmFjaWFcIlxyXG59IGVsc2UgaWYgKGcgPT09IDEpIHtcclxuICBkZXNjcmlwY2lvbkdyYWNpYSA9IGBHcmFjaWEgcGFyY2lhbCBwb3IgJHtwZ30gbWVzZXMgKHNvbG8gcGFnYSBpbnRlcmVzZXMpYFxyXG59IGVsc2UgaWYgKGcgPT09IDIpIHtcclxuICBkZXNjcmlwY2lvbkdyYWNpYSA9IGBHcmFjaWEgdG90YWwgcG9yICR7cGd9IG1lc2VzIChubyBwYWdhIG5hZGEpYFxyXG59XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG5cclxuICAgICAgXHJcbiAgICAgIHJlc3VtZW46IHtcclxuICAgICAgICB0aXBvX3Rhc2E6IHNpbXVsYWNpb24udGlwb190YXNhLFxyXG4gICAgICAgIGNhcGl0YWxpemFjaW9uOiBzaW11bGFjaW9uLmNhcGl0YWxpemFjaW9uLFxyXG4gICAgICAgIHRhc2FfaW5ncmVzYWRhOiBzaW11bGFjaW9uLnRhc2FfaW50ZXJlcyxcclxuICAgICAgICBURU06IE51bWJlcihyLnRvRml4ZWQoNikpLFxyXG4gICAgICAgIHNhbGRvX2ZpbmFuY2lhcjogUFYtQ0lfbW9udG8sXHJcbiAgICAgICAgY29zdG9zX2luaWNpYWxlczogY29zdG9zSW5pY2lhbGVzLFxyXG4gICAgICAgIG1vbnRvX3ByZXN0YW1vX3RvdGFsOiBTLFxyXG4gICAgICAgIGN1b3RhX2Jhc2U6IE51bWJlcihDdW90YUJhc2UudG9GaXhlZCgyKSksXHJcbiAgICAgICAgcGxhem9fbWVzZXM6IG4sXHJcbiAgICAgICAgLy8g8J+fpiBOVUVWTzogZGV0YWxsZXMgZGUgZ3JhY2lhXHJcbiAgICAgICAgcGVyaW9kb19ncmFjaWFfdGlwbzogZyxcclxuICAgICAgICBwZXJpb2RvX2dyYWNpYV9tZXNlczogcGcsXHJcbiAgICAgICAgcGVyaW9kb19ncmFjaWFfZGVzY3JpcGNpb246IGRlc2NyaXBjaW9uR3JhY2lhLFxyXG5cclxuICAgICAgIFxyXG4gICAgICAgIFZBTjogTnVtYmVyKFZBTi50b0ZpeGVkKDIpKSxcclxuICAgICAgICBUSVI6IE51bWJlcigodGFzYUFwcm94ICogMTAwKS50b0ZpeGVkKDIpKSArIFwiJVwiLFxyXG4gICAgICAgIFRDRUE6IE51bWJlcigoVENFQSAqIDEwMCkudG9GaXhlZCgyKSkgKyBcIiVcIlxyXG4gICAgICB9LFxyXG4gICAgICBoZWFkZXJzOiBbXCJJdGVyXCIsXCJDdW90YUJhc2VcIixcIkN1b3RhXCIsXCJJbnRlcmVzXCIsXCJBbW9ydFwiLFwiU2VnRGVzXCIsXCJTZWdJbm1cIixcIlBvcnRlXCIsXCJTYWxkb1wiLFwiRmx1am9cIl0sXHJcbiAgICAgIGRhdGE6IEZsdWpvc1xyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gR0VUIC9zaW11bGFjaW9uZXM6XCIsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3JcIiB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGIiLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJ0aXBvX21vbmVkYSIsInRpcG9fdGFzYSIsInRhc2FfaW50ZXJlcyIsImNhcGl0YWxpemFjaW9uIiwibW9udG9fcHJlc3RhbW8iLCJjdW90YV9pbmljaWFsIiwicGxhem9fbWVzZXMiLCJmZWNoYV9pbmljaW8iLCJwbGF6b190YXNhX2ludGVyZXMiLCJwZXJpb2RvX2dyYWNpYSIsInBsYXpvX3BlcmlvZG9fZ3JhY2lhIiwibW9udG9fYm9ub19iYnAiLCJjbGFzaWZpY2FjaW9uX2Jvbm9fYmJwIiwidGVtX3NlZ3Vyb19kZXNncmF2YW1lbiIsInRhc2Ffc2VndXJvX2lubXVlYmxlIiwicG9ydGVzIiwiY29zdG9zX2luaWNpYWxlcyIsInVzdWFyaW9faWQiLCJjbGllbnRlc19pZCIsImlubXVlYmxlX2lkIiwiaG95IiwiRGF0ZSIsImVycm9yZXMiLCJwdXNoIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwic3RhdHVzIiwibnVldmFTaW11bGFjaW9uIiwic2ltdWxhY2lvbiIsImNyZWF0ZSIsImRhdGEiLCJTdHJpbmciLCJjdW90YV9tZW5zdWFsIiwiY29zdG9zSW5pY2lhbGVzIiwibWVzc2FnZSIsIkdFVCIsImZpbmRGaXJzdCIsIm9yZGVyQnkiLCJpZF9zaW11bGFjaW9uIiwiaW5jbHVkZSIsImNsaWVudGUiLCJjb2siLCJ0aXBvVGFzYSIsImkiLCJOdW1iZXIiLCJwIiwiYyIsIlBWIiwiQ0kiLCJiYnAiLCJtYmJwIiwibiIsIkNPS19URUEiLCJ0b051bWJlciIsIkNPS19URU0iLCJNYXRoIiwicG93IiwiVFNEIiwiVFNJIiwiUG9ydGUiLCJjYWxjdWxhclRFTSIsIlRpcG9UYXNhIiwibSIsIlRFQSIsInIiLCJDSV9tb250byIsIkJCUF9hcGxpY2FkbyIsIlMiLCJnIiwicGciLCJTYWxkbyIsIkN1b3RhQmFzZSIsImRlYmVSZWNhbGN1bGFyQ3VvdGEiLCJGbHVqb3MiLCJjdW90YXMiLCJrIiwiSW50ZXJlcyIsIlNlZ0RlcyIsIlNlZ0lubSIsIlBvcnRlVmFsIiwiQW1vcnQiLCJDdW90YSIsInRvRml4ZWQiLCJ0YXNhIiwic3VtYUN1b3RhcyIsIlZBTiIsImZsdWpvc1RJUiIsInRhc2FBcHJveCIsImluY3JlbWVudG8iLCJ2YWxvclZBTiIsIml0ZXIiLCJsaW1pdGUiLCJhYnMiLCJUQ0VBIiwiZGVzY3JpcGNpb25HcmFjaWEiLCJyZXN1bWVuIiwidGFzYV9pbmdyZXNhZGEiLCJURU0iLCJzYWxkb19maW5hbmNpYXIiLCJtb250b19wcmVzdGFtb190b3RhbCIsImN1b3RhX2Jhc2UiLCJwZXJpb2RvX2dyYWNpYV90aXBvIiwicGVyaW9kb19ncmFjaWFfbWVzZXMiLCJwZXJpb2RvX2dyYWNpYV9kZXNjcmlwY2lvbiIsIlRJUiIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/simulaciones/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGtCQUFrQkM7QUFFeEIsTUFBTUMsU0FBU0YsZ0JBQWdCRSxNQUFNLElBQUksSUFBSUgsd0RBQVlBO0FBRXpELGlFQUFlRyxNQUFNQSxFQUFDO0FBRXRCLElBQUlDLElBQXFDLEVBQUVILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudGVzLWNydWQvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbCBhcyB1bmtub3duIGFzIHsgcHJpc21hOiBQcmlzbWFDbGllbnQgfTtcclxuXHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcHJpc21hO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTsiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();