"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/simulaciones/route";
exports.ids = ["app/api/simulaciones/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_Camila_Documents_Finanzas_2025_2_Trabajo_Finan_app_api_simulaciones_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/simulaciones/route.ts */ \"(rsc)/./app/api/simulaciones/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/simulaciones/route\",\n        pathname: \"/api/simulaciones\",\n        filename: \"route\",\n        bundlePath: \"app/api/simulaciones/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Camila\\\\Documents\\\\Finanzas 2025-2\\\\Trabajo-Finan\\\\app\\\\api\\\\simulaciones\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Camila_Documents_Finanzas_2025_2_Trabajo_Finan_app_api_simulaciones_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/simulaciones/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzaW11bGFjaW9uZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNpbXVsYWNpb25lcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNpbXVsYWNpb25lcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNDYW1pbGElNUNEb2N1bWVudHMlNUNGaW5hbnphcyUyMDIwMjUtMiU1Q1RyYWJham8tRmluYW4lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0NhbWlsYSU1Q0RvY3VtZW50cyU1Q0ZpbmFuemFzJTIwMjAyNS0yJTVDVHJhYmFqby1GaW5hbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNzRDtBQUN2QztBQUM0RDtBQUMzSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGllbnRlcy1jcnVkLz8zOGY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIm5leHQvZGlzdC9zZXJ2ZXIvbm9kZS1wb2x5ZmlsbC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxDYW1pbGFcXFxcRG9jdW1lbnRzXFxcXEZpbmFuemFzIDIwMjUtMlxcXFxUcmFiYWpvLUZpbmFuXFxcXGFwcFxcXFxhcGlcXFxcc2ltdWxhY2lvbmVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zaW11bGFjaW9uZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zaW11bGFjaW9uZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NpbXVsYWNpb25lcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXENhbWlsYVxcXFxEb2N1bWVudHNcXFxcRmluYW56YXMgMjAyNS0yXFxcXFRyYWJham8tRmluYW5cXFxcYXBwXFxcXGFwaVxcXFxzaW11bGFjaW9uZXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc2ltdWxhY2lvbmVzL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/simulaciones/route.ts":
/*!***************************************!*\
  !*** ./app/api/simulaciones/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n// ============================================================\n// === 1️⃣ POST: Registrar una nueva simulación (con validaciones)\n// ============================================================\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        let { tipo_moneda, tipo_tasa, tasa_interes, capitalizacion, monto_prestamo, cuota_inicial, plazo_meses, fecha_inicio, plazo_tasa_interes, periodo_gracia, plazo_periodo_gracia, monto_bono_bbp, clasificacion_bono_bbp, tem_seguro_desgravamen, tasa_seguro_inmueble, portes, usuario_id, clientes_id, inmueble_id } = body;\n        // === Defaults\n        const hoy = new Date();\n        fecha_inicio = fecha_inicio ? new Date(fecha_inicio) : hoy;\n        tipo_moneda = tipo_moneda ?? 0;\n        tipo_tasa = tipo_tasa ?? 0;\n        plazo_tasa_interes = plazo_tasa_interes ?? 7;\n        capitalizacion = capitalizacion ?? 0;\n        periodo_gracia = periodo_gracia ?? 0;\n        plazo_periodo_gracia = plazo_periodo_gracia ?? 1;\n        clasificacion_bono_bbp = clasificacion_bono_bbp ?? 0;\n        monto_bono_bbp = monto_bono_bbp ?? 0;\n        tem_seguro_desgravamen = tem_seguro_desgravamen ?? 0;\n        tasa_seguro_inmueble = tasa_seguro_inmueble ?? 0;\n        portes = portes ?? 0;\n        const errores = [];\n        // === Validaciones según tu tabla\n        if (tipo_moneda === 0) {\n            if (monto_prestamo < 68800 || monto_prestamo > 362100) errores.push(\"El valor del inmueble (PV) debe estar entre S/. 68,800 y S/. 362,100.\");\n        } else {\n            if (monto_prestamo < 19607.84 || monto_prestamo > 104411.76) errores.push(\"El valor del inmueble (PV) en d\\xf3lares debe estar entre $ 19,607.84 y $ 104,411.76.\");\n        }\n        if (cuota_inicial < 7.5 || cuota_inicial > 100) errores.push(\"La cuota inicial (CI) debe estar entre 7.5% y 100%.\");\n        if (plazo_meses < 60 || plazo_meses > 300) errores.push(\"El plazo en meses (n) debe estar entre 60 y 300.\");\n        if (fecha_inicio < hoy) errores.push(\"La fecha de desembolso no puede ser anterior a hoy.\");\n        if (tasa_interes <= 0) errores.push(\"La tasa de inter\\xe9s (i) debe ser mayor que 0.\");\n        if (plazo_tasa_interes < 0 || plazo_tasa_interes > 7) errores.push(\"El plazo de tasa de inter\\xe9s (p) debe estar entre 0 y 7.\");\n        if (capitalizacion < 0 || capitalizacion > 7) errores.push(\"La capitalizaci\\xf3n (c) debe estar entre 0 y 7.\");\n        if (periodo_gracia < 0 || periodo_gracia > 2) errores.push(\"El periodo de gracia (g) debe estar entre 0 y 2.\");\n        if (plazo_periodo_gracia < 1 || plazo_periodo_gracia > 24) errores.push(\"El plazo del periodo de gracia (pg) debe estar entre 1 y 24.\");\n        if (monto_bono_bbp < 0 || monto_bono_bbp > 33700) errores.push(\"El monto del bono BBP (mbbp) debe estar entre S/. 7,800 y S/. 33,700.\");\n        if (tem_seguro_desgravamen < 0) errores.push(\"El TEM del seguro desgravamen debe ser >= 0.\");\n        if (tasa_seguro_inmueble < 0) errores.push(\"La tasa del seguro inmueble debe ser >= 0.\");\n        if (portes < 0) errores.push(\"El monto de portes debe ser >= 0.\");\n        if (!usuario_id || !clientes_id || !inmueble_id) errores.push(\"Debe incluir usuario_id, clientes_id e inmueble_id v\\xe1lidos.\");\n        if (errores.length > 0) {\n            console.log(\"⚠️ Validaciones activas:\", errores);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: errores\n            }, {\n                status: 400\n            });\n        }\n        // === Insertar simulación ===\n        const nuevaSimulacion = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].simulacion.create({\n            data: {\n                tipo_moneda: tipo_moneda === 0 ? \"Soles\" : \"D\\xf3lares\",\n                tipo_tasa: tipo_tasa === 0 ? \"Efectiva\" : \"Nominal\",\n                tasa_interes,\n                fecha_inicio,\n                capitalizacion: String(capitalizacion),\n                monto_prestamo,\n                cuota_inicial,\n                cuota_mensual: 0,\n                periodo_gracia: String(periodo_gracia),\n                plazo_tasa_interes,\n                plazo_meses,\n                plazo_periodo_gracia,\n                monto_bono_bbp,\n                clasificacion_bono_bbp,\n                portes,\n                tem_seguro_desgravamen,\n                tasa_seguro_inmueble,\n                usuario_id,\n                clientes_id,\n                inmueble_id\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"✅ Simulaci\\xf3n registrada correctamente.\",\n            simulacion: nuevaSimulacion\n        });\n    } catch (error) {\n        console.error(\"❌ Error en POST /simulaciones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Error interno del servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n// ============================================================\n// === 2️⃣ GET: Calcular simulación (Método Francés)\n// ============================================================\nasync function GET() {\n    try {\n        // Traer la última simulación registrada\n        const simulacion = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].simulacion.findFirst({\n            orderBy: {\n                id_simulacion: \"desc\"\n            }\n        });\n        if (!simulacion) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"No se encontr\\xf3 ninguna simulaci\\xf3n.\"\n        }, {\n            status: 404\n        });\n        // === Conversión a números ===\n        const tipoTasa = simulacion.tipo_tasa === \"Efectiva\" ? 0 : 1;\n        const i = Number(simulacion.tasa_interes);\n        const p = simulacion.plazo_tasa_interes;\n        const c = Number(simulacion.capitalizacion);\n        const PV = Number(simulacion.monto_prestamo);\n        const CI = Number(simulacion.cuota_inicial) / 100;\n        const bbp = simulacion.monto_bono_bbp ? 1 : 0;\n        const mbbp = Number(simulacion.monto_bono_bbp) || 0;\n        const n = simulacion.plazo_meses;\n        const TSD = Number(simulacion.tem_seguro_desgravamen) || 0;\n        const TSI = Number(simulacion.tasa_seguro_inmueble) || 0;\n        const Porte = Number(simulacion.portes) || 0;\n        // === 1. Calcular TEM (tasa efectiva mensual)\n        function calcularTEM(TipoTasa, i, p, c) {\n            if (TipoTasa === 0) {\n                switch(p){\n                    case 0:\n                        return Math.pow(1 + i, 30) - 1;\n                    case 1:\n                        return Math.pow(1 + i, 2) - 1;\n                    case 2:\n                        return i;\n                    case 3:\n                        return Math.pow(1 + i, 1 / 2) - 1;\n                    case 4:\n                        return Math.pow(1 + i, 1 / 3) - 1;\n                    case 5:\n                        return Math.pow(1 + i, 1 / 4) - 1;\n                    case 6:\n                        return Math.pow(1 + i, 1 / 6) - 1;\n                    default:\n                        return Math.pow(1 + i, 1 / 12) - 1;\n                }\n            } else {\n                const m = c === 0 ? 360 : c === 1 ? 24 : c === 2 ? 12 : c === 3 ? 6 : c === 4 ? 4 : c === 5 ? 3 : c === 6 ? 2 : 1;\n                const TEA = Math.pow(1 + i / m, m) - 1;\n                return Math.pow(1 + TEA, 1 / 12) - 1;\n            }\n        }\n        const r = calcularTEM(tipoTasa, i, p, c);\n        // === 2. Calcular capital vivo (S)\n        const CI_monto = PV * CI;\n        const BBP_aplicado = bbp === 1 ? mbbp : 0;\n        const S = PV - CI_monto - BBP_aplicado;\n        // === 3. Calcular cuota base (método francés)\n        const CuotaBase = redondear(S * r / (1 - Math.pow(1 + r, -n)), 2);\n        // === 4. Generar matriz de pagos\n        let Saldo = S;\n        const Flujos = [];\n        const cuotas = [];\n        let InteresTot = 0, AmortTot = 0, SegDesTot = 0, SegInmTot = 0, PortesTot = 0;\n        for(let k = 1; k <= n; k++){\n            const Interes = redondear(Saldo * r, 2);\n            const Amort = redondear(CuotaBase - Interes, 2);\n            const SegDes = redondear(Saldo * TSD, 2);\n            const SegInm = redondear(PV * TSI, 2);\n            const Cuota = redondear(CuotaBase + SegDes + SegInm + Porte, 2);\n            const Flujo = redondear(-1 * Cuota, 2);\n            Saldo = redondear(Saldo - Amort, 2);\n            InteresTot += Interes;\n            AmortTot += Amort;\n            SegDesTot += SegDes;\n            SegInmTot += SegInm;\n            PortesTot += Porte;\n            cuotas.push(Cuota);\n            Flujos.push([\n                k,\n                CuotaBase,\n                Interes,\n                Amort,\n                Saldo,\n                SegDes,\n                SegInm,\n                Porte,\n                Cuota,\n                Flujo\n            ]);\n        }\n        // === 5. Calcular VAN (desde la perspectiva del cliente)\n        let sumaCuotas = 0;\n        for(let i = 0; i < n; i++){\n            sumaCuotas += cuotas[i] / Math.pow(1 + r, i + 1);\n        }\n        const VAN = -S + sumaCuotas // positivo = inversión atractiva para el banco\n        ;\n        // === 6. Calcular TIR (flujo: préstamo recibido, pagos mensuales)\n        const flujosTIR = [\n            -S,\n            ...cuotas\n        ] // cliente paga cuotas, préstamo se recibe al inicio\n        ;\n        let tasaAprox = 0.01;\n        let incremento = 0.000001;\n        let valorVAN = 1;\n        let iter = 0;\n        const limite = 100000;\n        while(Math.abs(valorVAN) > 0.0001 && iter < limite){\n            valorVAN = 0;\n            for(let i = 0; i < flujosTIR.length; i++){\n                valorVAN += flujosTIR[i] / Math.pow(1 + tasaAprox, i);\n            }\n            tasaAprox += valorVAN > 0 ? incremento : -incremento;\n            iter++;\n        }\n        // === 7. Calcular TCEA\n        const TCEA = Math.pow(1 + tasaAprox, 12) - 1;\n        // ✅ === FUNCIÓN DE REDONDEO (PÉGALA AQUÍ ANTES DEL RETURN)\n        function redondear(num, dec = 4) {\n            return Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);\n        }\n        // === 8. Retornar respuesta ===\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            resumen: {\n                tipo_tasa: simulacion.tipo_tasa,\n                capitalizacion: simulacion.capitalizacion,\n                tasa_ingresada: simulacion.tasa_interes,\n                TEM: redondear(r, 6),\n                monto_prestamo: simulacion.monto_prestamo,\n                plazo_meses: n,\n                cuota_base: redondear(CuotaBase, 2),\n                VAN: redondear(VAN, 2),\n                TIR: redondear(tasaAprox * 100, 2) + \"%\",\n                TCEA: redondear(TCEA * 100, 2) + \"%\"\n            },\n            headers: [\n                \"Iter\",\n                \"CuotaBase\",\n                \"Interes\",\n                \"Amort\",\n                \"Saldo\",\n                \"SegDes\",\n                \"SegInm\",\n                \"Porte\",\n                \"Cuota\",\n                \"Flujo\"\n            ],\n            data: Flujos\n        });\n    } catch (error) {\n        console.error(\"❌ Error en GET /simulaciones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Error interno del servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9wQyxLQUFLcUMsS0FBSyxDQUFDRixNQUFNbkMsS0FBS0MsR0FBRyxDQUFDLElBQUltQyxRQUFRcEMsS0FBS0MsR0FBRyxDQUFDLElBQUltQztRQUMxRDtRQUVKLGdDQUFnQztRQUNoQyxPQUFPaEcsa0ZBQVlBLENBQUNLLElBQUksQ0FBQztZQUN2QjZGLFNBQVM7Z0JBQ1AzRixXQUFXNEIsV0FBVzVCLFNBQVM7Z0JBQy9CRSxnQkFBZ0IwQixXQUFXMUIsY0FBYztnQkFDekMwRixnQkFBZ0JoRSxXQUFXM0IsWUFBWTtnQkFDdkM0RixLQUFLL0IsVUFBVUwsR0FBRztnQkFDbEJ0RCxnQkFBZ0J5QixXQUFXekIsY0FBYztnQkFDekNFLGFBQWEwQztnQkFDYitDLFlBQVloQyxVQUFVRCxXQUFXO2dCQUNqQ2tCLEtBQUtqQixVQUFVaUIsS0FBSztnQkFDcEJnQixLQUFLakMsVUFBVW1CLFlBQVksS0FBSyxLQUFLO2dCQUNyQ00sTUFBTXpCLFVBQVV5QixPQUFPLEtBQUssS0FBSztZQUNuQztZQUNBUyxTQUFTO2dCQUFDO2dCQUFRO2dCQUFhO2dCQUFXO2dCQUFTO2dCQUFTO2dCQUFVO2dCQUFVO2dCQUFTO2dCQUFTO2FBQVE7WUFDMUdsRSxNQUFNa0M7UUFDUjtJQUNGLEVBQUUsT0FBT3ZDLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBT2hDLGtGQUFZQSxDQUFDSyxJQUFJLENBQUM7WUFBRTJCLE9BQU87UUFBNkIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudGVzLWNydWQvLi9hcHAvYXBpL3NpbXVsYWNpb25lcy9yb3V0ZS50cz8zNDJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgZGIgZnJvbSAnQC9saWIvZGInXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gPT09IDHvuI/ig6MgUE9TVDogUmVnaXN0cmFyIHVuYSBudWV2YSBzaW11bGFjacOzbiAoY29uIHZhbGlkYWNpb25lcylcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxyXG4gICAgbGV0IHtcclxuICAgICAgdGlwb19tb25lZGEsXHJcbiAgICAgIHRpcG9fdGFzYSxcclxuICAgICAgdGFzYV9pbnRlcmVzLFxyXG4gICAgICBjYXBpdGFsaXphY2lvbixcclxuICAgICAgbW9udG9fcHJlc3RhbW8sXHJcbiAgICAgIGN1b3RhX2luaWNpYWwsXHJcbiAgICAgIHBsYXpvX21lc2VzLFxyXG4gICAgICBmZWNoYV9pbmljaW8sXHJcbiAgICAgIHBsYXpvX3Rhc2FfaW50ZXJlcyxcclxuICAgICAgcGVyaW9kb19ncmFjaWEsXHJcbiAgICAgIHBsYXpvX3BlcmlvZG9fZ3JhY2lhLFxyXG4gICAgICBtb250b19ib25vX2JicCxcclxuICAgICAgY2xhc2lmaWNhY2lvbl9ib25vX2JicCxcclxuICAgICAgdGVtX3NlZ3Vyb19kZXNncmF2YW1lbixcclxuICAgICAgdGFzYV9zZWd1cm9faW5tdWVibGUsXHJcbiAgICAgIHBvcnRlcyxcclxuICAgICAgdXN1YXJpb19pZCxcclxuICAgICAgY2xpZW50ZXNfaWQsXHJcbiAgICAgIGlubXVlYmxlX2lkXHJcbiAgICB9ID0gYm9keVxyXG5cclxuICAgIC8vID09PSBEZWZhdWx0c1xyXG4gICAgY29uc3QgaG95ID0gbmV3IERhdGUoKVxyXG4gICAgZmVjaGFfaW5pY2lvID0gZmVjaGFfaW5pY2lvID8gbmV3IERhdGUoZmVjaGFfaW5pY2lvKSA6IGhveVxyXG4gICAgdGlwb19tb25lZGEgPSB0aXBvX21vbmVkYSA/PyAwXHJcbiAgICB0aXBvX3Rhc2EgPSB0aXBvX3Rhc2EgPz8gMFxyXG4gICAgcGxhem9fdGFzYV9pbnRlcmVzID0gcGxhem9fdGFzYV9pbnRlcmVzID8/IDdcclxuICAgIGNhcGl0YWxpemFjaW9uID0gY2FwaXRhbGl6YWNpb24gPz8gMFxyXG4gICAgcGVyaW9kb19ncmFjaWEgPSBwZXJpb2RvX2dyYWNpYSA/PyAwXHJcbiAgICBwbGF6b19wZXJpb2RvX2dyYWNpYSA9IHBsYXpvX3BlcmlvZG9fZ3JhY2lhID8/IDFcclxuICAgIGNsYXNpZmljYWNpb25fYm9ub19iYnAgPSBjbGFzaWZpY2FjaW9uX2Jvbm9fYmJwID8/IDBcclxuICAgIG1vbnRvX2Jvbm9fYmJwID0gbW9udG9fYm9ub19iYnAgPz8gMFxyXG4gICAgdGVtX3NlZ3Vyb19kZXNncmF2YW1lbiA9IHRlbV9zZWd1cm9fZGVzZ3JhdmFtZW4gPz8gMFxyXG4gICAgdGFzYV9zZWd1cm9faW5tdWVibGUgPSB0YXNhX3NlZ3Vyb19pbm11ZWJsZSA/PyAwXHJcbiAgICBwb3J0ZXMgPSBwb3J0ZXMgPz8gMFxyXG5cclxuICAgIGNvbnN0IGVycm9yZXM6IHN0cmluZ1tdID0gW11cclxuXHJcbiAgICAvLyA9PT0gVmFsaWRhY2lvbmVzIHNlZ8O6biB0dSB0YWJsYVxyXG4gICAgaWYgKHRpcG9fbW9uZWRhID09PSAwKSB7XHJcbiAgICAgIGlmIChtb250b19wcmVzdGFtbyA8IDY4ODAwIHx8IG1vbnRvX3ByZXN0YW1vID4gMzYyMTAwKVxyXG4gICAgICAgIGVycm9yZXMucHVzaCgnRWwgdmFsb3IgZGVsIGlubXVlYmxlIChQVikgZGViZSBlc3RhciBlbnRyZSBTLy4gNjgsODAwIHkgUy8uIDM2MiwxMDAuJylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChtb250b19wcmVzdGFtbyA8IDE5NjA3Ljg0IHx8IG1vbnRvX3ByZXN0YW1vID4gMTA0NDExLjc2KVxyXG4gICAgICAgIGVycm9yZXMucHVzaCgnRWwgdmFsb3IgZGVsIGlubXVlYmxlIChQVikgZW4gZMOzbGFyZXMgZGViZSBlc3RhciBlbnRyZSAkIDE5LDYwNy44NCB5ICQgMTA0LDQxMS43Ni4nKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdW90YV9pbmljaWFsIDwgNy41IHx8IGN1b3RhX2luaWNpYWwgPiAxMDApXHJcbiAgICAgIGVycm9yZXMucHVzaCgnTGEgY3VvdGEgaW5pY2lhbCAoQ0kpIGRlYmUgZXN0YXIgZW50cmUgNy41JSB5IDEwMCUuJylcclxuICAgIGlmIChwbGF6b19tZXNlcyA8IDYwIHx8IHBsYXpvX21lc2VzID4gMzAwKVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0VsIHBsYXpvIGVuIG1lc2VzIChuKSBkZWJlIGVzdGFyIGVudHJlIDYwIHkgMzAwLicpXHJcbiAgICBpZiAoZmVjaGFfaW5pY2lvIDwgaG95KVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0xhIGZlY2hhIGRlIGRlc2VtYm9sc28gbm8gcHVlZGUgc2VyIGFudGVyaW9yIGEgaG95LicpXHJcbiAgICBpZiAodGFzYV9pbnRlcmVzIDw9IDApXHJcbiAgICAgIGVycm9yZXMucHVzaCgnTGEgdGFzYSBkZSBpbnRlcsOpcyAoaSkgZGViZSBzZXIgbWF5b3IgcXVlIDAuJylcclxuICAgIGlmIChwbGF6b190YXNhX2ludGVyZXMgPCAwIHx8IHBsYXpvX3Rhc2FfaW50ZXJlcyA+IDcpXHJcbiAgICAgIGVycm9yZXMucHVzaCgnRWwgcGxhem8gZGUgdGFzYSBkZSBpbnRlcsOpcyAocCkgZGViZSBlc3RhciBlbnRyZSAwIHkgNy4nKVxyXG4gICAgaWYgKGNhcGl0YWxpemFjaW9uIDwgMCB8fCBjYXBpdGFsaXphY2lvbiA+IDcpXHJcbiAgICAgIGVycm9yZXMucHVzaCgnTGEgY2FwaXRhbGl6YWNpw7NuIChjKSBkZWJlIGVzdGFyIGVudHJlIDAgeSA3LicpXHJcbiAgICBpZiAocGVyaW9kb19ncmFjaWEgPCAwIHx8IHBlcmlvZG9fZ3JhY2lhID4gMilcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdFbCBwZXJpb2RvIGRlIGdyYWNpYSAoZykgZGViZSBlc3RhciBlbnRyZSAwIHkgMi4nKVxyXG4gICAgaWYgKHBsYXpvX3BlcmlvZG9fZ3JhY2lhIDwgMSB8fCBwbGF6b19wZXJpb2RvX2dyYWNpYSA+IDI0KVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0VsIHBsYXpvIGRlbCBwZXJpb2RvIGRlIGdyYWNpYSAocGcpIGRlYmUgZXN0YXIgZW50cmUgMSB5IDI0LicpXHJcbiAgICBpZiAobW9udG9fYm9ub19iYnAgPCAwIHx8IG1vbnRvX2Jvbm9fYmJwID4gMzM3MDApXHJcbiAgICAgIGVycm9yZXMucHVzaCgnRWwgbW9udG8gZGVsIGJvbm8gQkJQIChtYmJwKSBkZWJlIGVzdGFyIGVudHJlIFMvLiA3LDgwMCB5IFMvLiAzMyw3MDAuJylcclxuICAgIGlmICh0ZW1fc2VndXJvX2Rlc2dyYXZhbWVuIDwgMClcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdFbCBURU0gZGVsIHNlZ3VybyBkZXNncmF2YW1lbiBkZWJlIHNlciA+PSAwLicpXHJcbiAgICBpZiAodGFzYV9zZWd1cm9faW5tdWVibGUgPCAwKVxyXG4gICAgICBlcnJvcmVzLnB1c2goJ0xhIHRhc2EgZGVsIHNlZ3VybyBpbm11ZWJsZSBkZWJlIHNlciA+PSAwLicpXHJcbiAgICBpZiAocG9ydGVzIDwgMClcclxuICAgICAgZXJyb3Jlcy5wdXNoKCdFbCBtb250byBkZSBwb3J0ZXMgZGViZSBzZXIgPj0gMC4nKVxyXG4gICAgaWYgKCF1c3VhcmlvX2lkIHx8ICFjbGllbnRlc19pZCB8fCAhaW5tdWVibGVfaWQpXHJcbiAgICAgIGVycm9yZXMucHVzaCgnRGViZSBpbmNsdWlyIHVzdWFyaW9faWQsIGNsaWVudGVzX2lkIGUgaW5tdWVibGVfaWQgdsOhbGlkb3MuJylcclxuXHJcbiAgICBpZiAoZXJyb3Jlcy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIuKaoO+4jyBWYWxpZGFjaW9uZXMgYWN0aXZhczpcIiwgZXJyb3JlcylcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvcmVzIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT0gSW5zZXJ0YXIgc2ltdWxhY2nDs24gPT09XHJcbiAgICBjb25zdCBudWV2YVNpbXVsYWNpb24gPSBhd2FpdCBkYi5zaW11bGFjaW9uLmNyZWF0ZSh7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICB0aXBvX21vbmVkYTogdGlwb19tb25lZGEgPT09IDAgPyAnU29sZXMnIDogJ0TDs2xhcmVzJyxcclxuICAgICAgICB0aXBvX3Rhc2E6IHRpcG9fdGFzYSA9PT0gMCA/ICdFZmVjdGl2YScgOiAnTm9taW5hbCcsXHJcbiAgICAgICAgdGFzYV9pbnRlcmVzLFxyXG4gICAgICAgIGZlY2hhX2luaWNpbyxcclxuICAgICAgICBjYXBpdGFsaXphY2lvbjogU3RyaW5nKGNhcGl0YWxpemFjaW9uKSxcclxuICAgICAgICBtb250b19wcmVzdGFtbyxcclxuICAgICAgICBjdW90YV9pbmljaWFsLFxyXG4gICAgICAgIGN1b3RhX21lbnN1YWw6IDAsXHJcbiAgICAgICAgcGVyaW9kb19ncmFjaWE6IFN0cmluZyhwZXJpb2RvX2dyYWNpYSksXHJcbiAgICAgICAgcGxhem9fdGFzYV9pbnRlcmVzLFxyXG4gICAgICAgIHBsYXpvX21lc2VzLFxyXG4gICAgICAgIHBsYXpvX3BlcmlvZG9fZ3JhY2lhLFxyXG4gICAgICAgIG1vbnRvX2Jvbm9fYmJwLFxyXG4gICAgICAgIGNsYXNpZmljYWNpb25fYm9ub19iYnAsXHJcbiAgICAgICAgcG9ydGVzLFxyXG4gICAgICAgIHRlbV9zZWd1cm9fZGVzZ3JhdmFtZW4sXHJcbiAgICAgICAgdGFzYV9zZWd1cm9faW5tdWVibGUsXHJcbiAgICAgICAgdXN1YXJpb19pZCxcclxuICAgICAgICBjbGllbnRlc19pZCxcclxuICAgICAgICBpbm11ZWJsZV9pZFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICfinIUgU2ltdWxhY2nDs24gcmVnaXN0cmFkYSBjb3JyZWN0YW1lbnRlLicsXHJcbiAgICAgIHNpbXVsYWNpb246IG51ZXZhU2ltdWxhY2lvblxyXG4gICAgfSlcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZW4gUE9TVCAvc2ltdWxhY2lvbmVzOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vID09PSAy77iP4oOjIEdFVDogQ2FsY3VsYXIgc2ltdWxhY2nDs24gKE3DqXRvZG8gRnJhbmPDqXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBUcmFlciBsYSDDumx0aW1hIHNpbXVsYWNpw7NuIHJlZ2lzdHJhZGFcclxuICAgIGNvbnN0IHNpbXVsYWNpb24gPSBhd2FpdCBkYi5zaW11bGFjaW9uLmZpbmRGaXJzdCh7XHJcbiAgICAgIG9yZGVyQnk6IHsgaWRfc2ltdWxhY2lvbjogJ2Rlc2MnIH1cclxuICAgIH0pXHJcbiAgICBpZiAoIXNpbXVsYWNpb24pXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm8gc2UgZW5jb250csOzIG5pbmd1bmEgc2ltdWxhY2nDs24uJyB9LCB7IHN0YXR1czogNDA0IH0pXHJcblxyXG4gICAgLy8gPT09IENvbnZlcnNpw7NuIGEgbsO6bWVyb3MgPT09XHJcbiAgICBjb25zdCB0aXBvVGFzYSA9IHNpbXVsYWNpb24udGlwb190YXNhID09PSAnRWZlY3RpdmEnID8gMCA6IDFcclxuICAgIGNvbnN0IGkgPSBOdW1iZXIoc2ltdWxhY2lvbi50YXNhX2ludGVyZXMpXHJcbiAgICBjb25zdCBwID0gc2ltdWxhY2lvbi5wbGF6b190YXNhX2ludGVyZXNcclxuICAgIGNvbnN0IGMgPSBOdW1iZXIoc2ltdWxhY2lvbi5jYXBpdGFsaXphY2lvbilcclxuICAgIGNvbnN0IFBWID0gTnVtYmVyKHNpbXVsYWNpb24ubW9udG9fcHJlc3RhbW8pXHJcbiAgICBjb25zdCBDSSA9IE51bWJlcihzaW11bGFjaW9uLmN1b3RhX2luaWNpYWwpIC8gMTAwXHJcbiAgICBjb25zdCBiYnAgPSBzaW11bGFjaW9uLm1vbnRvX2Jvbm9fYmJwID8gMSA6IDBcclxuICAgIGNvbnN0IG1iYnAgPSBOdW1iZXIoc2ltdWxhY2lvbi5tb250b19ib25vX2JicCkgfHwgMFxyXG4gICAgY29uc3QgbiA9IHNpbXVsYWNpb24ucGxhem9fbWVzZXNcclxuICAgIGNvbnN0IFRTRCA9IE51bWJlcihzaW11bGFjaW9uLnRlbV9zZWd1cm9fZGVzZ3JhdmFtZW4pIHx8IDBcclxuICAgIGNvbnN0IFRTSSA9IE51bWJlcihzaW11bGFjaW9uLnRhc2Ffc2VndXJvX2lubXVlYmxlKSB8fCAwXHJcbiAgICBjb25zdCBQb3J0ZSA9IE51bWJlcihzaW11bGFjaW9uLnBvcnRlcykgfHwgMFxyXG5cclxuICAgIC8vID09PSAxLiBDYWxjdWxhciBURU0gKHRhc2EgZWZlY3RpdmEgbWVuc3VhbClcclxuICAgIGZ1bmN0aW9uIGNhbGN1bGFyVEVNKFRpcG9UYXNhOiBudW1iZXIsIGk6IG51bWJlciwgcDogbnVtYmVyLCBjOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICBpZiAoVGlwb1Rhc2EgPT09IDApIHtcclxuICAgICAgICBzd2l0Y2ggKHApIHtcclxuICAgICAgICAgIGNhc2UgMDogcmV0dXJuIE1hdGgucG93KDEgKyBpLCAzMCkgLSAxXHJcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiBNYXRoLnBvdygxICsgaSwgMikgLSAxXHJcbiAgICAgICAgICBjYXNlIDI6IHJldHVybiBpXHJcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiBNYXRoLnBvdygxICsgaSwgMSAvIDIpIC0gMVxyXG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gTWF0aC5wb3coMSArIGksIDEgLyAzKSAtIDFcclxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuIE1hdGgucG93KDEgKyBpLCAxIC8gNCkgLSAxXHJcbiAgICAgICAgICBjYXNlIDY6IHJldHVybiBNYXRoLnBvdygxICsgaSwgMSAvIDYpIC0gMVxyXG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuIE1hdGgucG93KDEgKyBpLCAxIC8gMTIpIC0gMVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBtID0gYyA9PT0gMCA/IDM2MCA6IGMgPT09IDEgPyAyNCA6IGMgPT09IDIgPyAxMiA6IGMgPT09IDMgPyA2IDogYyA9PT0gNCA/IDQgOiBjID09PSA1ID8gMyA6IGMgPT09IDYgPyAyIDogMVxyXG4gICAgICAgIGNvbnN0IFRFQSA9IE1hdGgucG93KDEgKyBpIC8gbSwgbSkgLSAxXHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDEgKyBURUEsIDEgLyAxMikgLSAxXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByID0gY2FsY3VsYXJURU0odGlwb1Rhc2EsIGksIHAsIGMpXHJcblxyXG4gICAgLy8gPT09IDIuIENhbGN1bGFyIGNhcGl0YWwgdml2byAoUylcclxuICAgIGNvbnN0IENJX21vbnRvID0gUFYgKiBDSVxyXG4gICAgY29uc3QgQkJQX2FwbGljYWRvID0gYmJwID09PSAxID8gbWJicCA6IDBcclxuICAgIGNvbnN0IFMgPSBQViAtIENJX21vbnRvIC0gQkJQX2FwbGljYWRvXHJcblxyXG4gICAgLy8gPT09IDMuIENhbGN1bGFyIGN1b3RhIGJhc2UgKG3DqXRvZG8gZnJhbmPDqXMpXHJcbiAgICBjb25zdCBDdW90YUJhc2UgPSByZWRvbmRlYXIoKFMgKiByKSAvICgxIC0gTWF0aC5wb3coMSArIHIsIC1uKSksIDIpXHJcblxyXG4gICAgLy8gPT09IDQuIEdlbmVyYXIgbWF0cml6IGRlIHBhZ29zXHJcbiAgICBsZXQgU2FsZG8gPSBTXHJcbiAgICBjb25zdCBGbHVqb3M6IG51bWJlcltdW10gPSBbXVxyXG4gICAgY29uc3QgY3VvdGFzOiBudW1iZXJbXSA9IFtdXHJcbiAgICBsZXQgSW50ZXJlc1RvdCA9IDAsIEFtb3J0VG90ID0gMCwgU2VnRGVzVG90ID0gMCwgU2VnSW5tVG90ID0gMCwgUG9ydGVzVG90ID0gMFxyXG5cclxuICAgIGZvciAobGV0IGsgPSAxOyBrIDw9IG47IGsrKykge1xyXG4gICAgICBjb25zdCBJbnRlcmVzID0gcmVkb25kZWFyKFNhbGRvICogciwgMilcclxuICAgICAgY29uc3QgQW1vcnQgPSByZWRvbmRlYXIoQ3VvdGFCYXNlIC0gSW50ZXJlcywgMilcclxuICAgICAgY29uc3QgU2VnRGVzID0gcmVkb25kZWFyKFNhbGRvICogVFNELCAyKVxyXG4gICAgICBjb25zdCBTZWdJbm0gPSByZWRvbmRlYXIoUFYgKiBUU0ksIDIpXHJcbiAgICAgIGNvbnN0IEN1b3RhID0gcmVkb25kZWFyKEN1b3RhQmFzZSArIFNlZ0RlcyArIFNlZ0lubSArIFBvcnRlLCAyKVxyXG4gICAgICBjb25zdCBGbHVqbyA9IHJlZG9uZGVhcigtMSAqIEN1b3RhLCAyKVxyXG4gICAgICBTYWxkbyA9IHJlZG9uZGVhcihTYWxkbyAtIEFtb3J0LCAyKVxyXG5cclxuICAgICAgSW50ZXJlc1RvdCArPSBJbnRlcmVzXHJcbiAgICAgIEFtb3J0VG90ICs9IEFtb3J0XHJcbiAgICAgIFNlZ0Rlc1RvdCArPSBTZWdEZXNcclxuICAgICAgU2VnSW5tVG90ICs9IFNlZ0lubVxyXG4gICAgICBQb3J0ZXNUb3QgKz0gUG9ydGVcclxuICAgICAgY3VvdGFzLnB1c2goQ3VvdGEpXHJcblxyXG4gICAgICBGbHVqb3MucHVzaChbXHJcbiAgICAgICAgaywgQ3VvdGFCYXNlLCBJbnRlcmVzLCBBbW9ydCwgU2FsZG8sIFNlZ0RlcywgU2VnSW5tLCBQb3J0ZSwgQ3VvdGEsIEZsdWpvXHJcbiAgICAgIF0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09IDUuIENhbGN1bGFyIFZBTiAoZGVzZGUgbGEgcGVyc3BlY3RpdmEgZGVsIGNsaWVudGUpXHJcbiAgICBsZXQgc3VtYUN1b3RhcyA9IDBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICBzdW1hQ3VvdGFzICs9IGN1b3Rhc1tpXSAvIE1hdGgucG93KDEgKyByLCBpICsgMSlcclxuICAgIH1cclxuICAgIGNvbnN0IFZBTiA9IC1TICsgc3VtYUN1b3RhcyAvLyBwb3NpdGl2byA9IGludmVyc2nDs24gYXRyYWN0aXZhIHBhcmEgZWwgYmFuY29cclxuXHJcbiAgICAvLyA9PT0gNi4gQ2FsY3VsYXIgVElSIChmbHVqbzogcHLDqXN0YW1vIHJlY2liaWRvLCBwYWdvcyBtZW5zdWFsZXMpXHJcbiAgICBjb25zdCBmbHVqb3NUSVIgPSBbLVMsIC4uLmN1b3Rhc10gLy8gY2xpZW50ZSBwYWdhIGN1b3RhcywgcHLDqXN0YW1vIHNlIHJlY2liZSBhbCBpbmljaW9cclxuICAgIGxldCB0YXNhQXByb3ggPSAwLjAxXHJcbiAgICBsZXQgaW5jcmVtZW50byA9IDAuMDAwMDAxXHJcbiAgICBsZXQgdmFsb3JWQU4gPSAxXHJcbiAgICBsZXQgaXRlciA9IDBcclxuICAgIGNvbnN0IGxpbWl0ZSA9IDEwMDAwMFxyXG5cclxuICAgIHdoaWxlIChNYXRoLmFicyh2YWxvclZBTikgPiAwLjAwMDEgJiYgaXRlciA8IGxpbWl0ZSkge1xyXG4gICAgdmFsb3JWQU4gPSAwXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZsdWpvc1RJUi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhbG9yVkFOICs9IGZsdWpvc1RJUltpXSAvIE1hdGgucG93KDEgKyB0YXNhQXByb3gsIGkpXHJcbiAgICB9XHJcbiAgICB0YXNhQXByb3ggKz0gdmFsb3JWQU4gPiAwID8gIGluY3JlbWVudG8gOiAtaW5jcmVtZW50b1xyXG4gICAgaXRlcisrXHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09IDcuIENhbGN1bGFyIFRDRUFcclxuICAgIGNvbnN0IFRDRUEgPSBNYXRoLnBvdygxICsgdGFzYUFwcm94LCAxMikgLSAxXHJcblxyXG4gICAgLy8g4pyFID09PSBGVU5DScOTTiBERSBSRURPTkRFTyAoUMOJR0FMQSBBUVXDjSBBTlRFUyBERUwgUkVUVVJOKVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlZG9uZGVhcihudW06IG51bWJlciwgZGVjOiBudW1iZXIgPSA0KSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogTWF0aC5wb3coMTAsIGRlYykpIC8gTWF0aC5wb3coMTAsIGRlYylcclxuICAgICAgICB9XHJcblxyXG4gICAgLy8gPT09IDguIFJldG9ybmFyIHJlc3B1ZXN0YSA9PT1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHJlc3VtZW46IHtcclxuICAgICAgICB0aXBvX3Rhc2E6IHNpbXVsYWNpb24udGlwb190YXNhLFxyXG4gICAgICAgIGNhcGl0YWxpemFjaW9uOiBzaW11bGFjaW9uLmNhcGl0YWxpemFjaW9uLFxyXG4gICAgICAgIHRhc2FfaW5ncmVzYWRhOiBzaW11bGFjaW9uLnRhc2FfaW50ZXJlcyxcclxuICAgICAgICBURU06IHJlZG9uZGVhcihyLCA2KSxcclxuICAgICAgICBtb250b19wcmVzdGFtbzogc2ltdWxhY2lvbi5tb250b19wcmVzdGFtbyxcclxuICAgICAgICBwbGF6b19tZXNlczogbixcclxuICAgICAgICBjdW90YV9iYXNlOiByZWRvbmRlYXIoQ3VvdGFCYXNlLCAyKSxcclxuICAgICAgICBWQU46IHJlZG9uZGVhcihWQU4sIDIpLFxyXG4gICAgICAgIFRJUjogcmVkb25kZWFyKHRhc2FBcHJveCAqIDEwMCwgMikgKyAnJScsXHJcbiAgICAgICAgVENFQTogcmVkb25kZWFyKFRDRUEgKiAxMDAsIDIpICsgJyUnXHJcbiAgICAgIH0sXHJcbiAgICAgIGhlYWRlcnM6IFtcIkl0ZXJcIiwgXCJDdW90YUJhc2VcIiwgXCJJbnRlcmVzXCIsIFwiQW1vcnRcIiwgXCJTYWxkb1wiLCBcIlNlZ0Rlc1wiLCBcIlNlZ0lubVwiLCBcIlBvcnRlXCIsIFwiQ3VvdGFcIiwgXCJGbHVqb1wiXSxcclxuICAgICAgZGF0YTogRmx1am9zXHJcbiAgICB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZW4gR0VUIC9zaW11bGFjaW9uZXM6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0Vycm9yIGludGVybm8gZGVsIHNlcnZpZG9yJyB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRiIiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwidGlwb19tb25lZGEiLCJ0aXBvX3Rhc2EiLCJ0YXNhX2ludGVyZXMiLCJjYXBpdGFsaXphY2lvbiIsIm1vbnRvX3ByZXN0YW1vIiwiY3VvdGFfaW5pY2lhbCIsInBsYXpvX21lc2VzIiwiZmVjaGFfaW5pY2lvIiwicGxhem9fdGFzYV9pbnRlcmVzIiwicGVyaW9kb19ncmFjaWEiLCJwbGF6b19wZXJpb2RvX2dyYWNpYSIsIm1vbnRvX2Jvbm9fYmJwIiwiY2xhc2lmaWNhY2lvbl9ib25vX2JicCIsInRlbV9zZWd1cm9fZGVzZ3JhdmFtZW4iLCJ0YXNhX3NlZ3Vyb19pbm11ZWJsZSIsInBvcnRlcyIsInVzdWFyaW9faWQiLCJjbGllbnRlc19pZCIsImlubXVlYmxlX2lkIiwiaG95IiwiRGF0ZSIsImVycm9yZXMiLCJwdXNoIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwic3RhdHVzIiwibnVldmFTaW11bGFjaW9uIiwic2ltdWxhY2lvbiIsImNyZWF0ZSIsImRhdGEiLCJTdHJpbmciLCJjdW90YV9tZW5zdWFsIiwibWVzc2FnZSIsIkdFVCIsImZpbmRGaXJzdCIsIm9yZGVyQnkiLCJpZF9zaW11bGFjaW9uIiwidGlwb1Rhc2EiLCJpIiwiTnVtYmVyIiwicCIsImMiLCJQViIsIkNJIiwiYmJwIiwibWJicCIsIm4iLCJUU0QiLCJUU0kiLCJQb3J0ZSIsImNhbGN1bGFyVEVNIiwiVGlwb1Rhc2EiLCJNYXRoIiwicG93IiwibSIsIlRFQSIsInIiLCJDSV9tb250byIsIkJCUF9hcGxpY2FkbyIsIlMiLCJDdW90YUJhc2UiLCJyZWRvbmRlYXIiLCJTYWxkbyIsIkZsdWpvcyIsImN1b3RhcyIsIkludGVyZXNUb3QiLCJBbW9ydFRvdCIsIlNlZ0Rlc1RvdCIsIlNlZ0lubVRvdCIsIlBvcnRlc1RvdCIsImsiLCJJbnRlcmVzIiwiQW1vcnQiLCJTZWdEZXMiLCJTZWdJbm0iLCJDdW90YSIsIkZsdWpvIiwic3VtYUN1b3RhcyIsIlZBTiIsImZsdWpvc1RJUiIsInRhc2FBcHJveCIsImluY3JlbWVudG8iLCJ2YWxvclZBTiIsIml0ZXIiLCJsaW1pdGUiLCJhYnMiLCJUQ0VBIiwibnVtIiwiZGVjIiwicm91bmQiLCJyZXN1bWVuIiwidGFzYV9pbmdyZXNhZGEiLCJURU0iLCJjdW90YV9iYXNlIiwiVElSIiwiaGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/simulaciones/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGtCQUFrQkM7QUFFeEIsTUFBTUMsU0FBU0YsZ0JBQWdCRSxNQUFNLElBQUksSUFBSUgsd0RBQVlBO0FBRXpELGlFQUFlRyxNQUFNQSxFQUFDO0FBRXRCLElBQUlDLElBQXFDLEVBQUVILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudGVzLWNydWQvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbCBhcyB1bmtub3duIGFzIHsgcHJpc21hOiBQcmlzbWFDbGllbnQgfTtcclxuXHJcbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcHJpc21hO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTsiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsimulaciones%2Froute&page=%2Fapi%2Fsimulaciones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsimulaciones%2Froute.ts&appDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CCamila%5CDocuments%5CFinanzas%202025-2%5CTrabajo-Finan&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();