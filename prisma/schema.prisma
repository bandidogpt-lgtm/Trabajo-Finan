generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Cliente {
  id               Int          @id @default(autoincrement())
  dni              String       @unique @db.VarChar(8)
  nombres          String
  apellidos        String       @db.VarChar(100)
  fecha_nacimiento DateTime
  duenio_propiedad Int
  email            String       @unique @db.VarChar(100)
  direccion        String       @db.VarChar(150)
  ingreso_mensual  Decimal      @db.Decimal(12, 3)
  estado_civil     String       @db.VarChar(20)
  telefono         String       @db.VarChar(9)
  cok              Decimal?     @db.Decimal(6, 3)
  flag_condiciones Boolean?     @default(false)
  simulaciones     Simulacion[] @relation("ClienteSimulaciones")
}

model Inmueble {
  id                 Int          @id @default(autoincrement())
  nombre_proyecto    String       @db.VarChar(100)
  precio_venta       Decimal      @db.Decimal(12, 3)
  nro_cuartos        Int
  area_m2            Decimal      @db.Decimal(6, 2)
  ubicacion          String       @db.VarChar(100)
  descripcion        String?
  tipo               String       @db.VarChar(100)
  imagen_referencial String?      @db.VarChar(500)
  sostenible         Boolean?     @default(false)
  simulaciones       Simulacion[] @relation("InmuebleSimulaciones")
}

model Usuario {
  id           Int          @id @default(autoincrement())
  nombre       String       @db.VarChar(50)
  apellido     String       @db.VarChar(50)
  clave        String       @db.VarChar(150)
  correo       String       @unique @db.VarChar(50)
  activo       Boolean
  rol          String       @db.VarChar(50)
  simulaciones Simulacion[] @relation("UsuarioSimulaciones")
}

model Simulacion {
  id_simulacion          Int      @id @default(autoincrement())
  tipo_moneda            String   @db.VarChar(20)
  tipo_tasa              String   @db.VarChar(20)
  tasa_interes           Decimal  @db.Decimal(6, 3)
  fecha_inicio           DateTime
  capitalizacion         String?  @db.VarChar(20)
  monto_prestamo         Decimal  @db.Decimal(12, 2)
  cuota_inicial          Decimal  @db.Decimal(10, 2)
  cuota_mensual          Decimal  @db.Decimal(6, 2)
  periodo_gracia         String?  @db.VarChar(20)
  plazo_tasa_interes     Int
  plazo_meses            Int
  plazo_periodo_gracia   Int
  monto_bono_bbp         Decimal? @db.Decimal(10, 2)
  clasificacion_bono_bbp Int?
  portes                 Decimal? @db.Decimal(6, 2)
  costosIniciales        Decimal? @db.Decimal(6, 2)
  tem_seguro_desgravamen Decimal? @db.Decimal(6, 6)
  tasa_seguro_inmueble   Decimal? @db.Decimal(6, 6)
  usuario_id             Int
  clientes_id            Int
  inmueble_id            Int
  gastosAdministrativos  Decimal? @db.Decimal(6, 2)
  cliente                Cliente  @relation("ClienteSimulaciones", fields: [clientes_id], references: [id])
  inmueble               Inmueble @relation("InmuebleSimulaciones", fields: [inmueble_id], references: [id])
  usuario                Usuario  @relation("UsuarioSimulaciones", fields: [usuario_id], references: [id])
}
